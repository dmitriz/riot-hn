{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/index.js","src/filters.js","src/app.html","src/views/user-view.html","src/views/item-view.html","src/views/news-view.html","node_modules/riot/riot.js","src/components/comment.html","src/components/item.html","src/store.js","node_modules/browserify/node_modules/events/events.js"],"names":["require","mount","parser","document","createElement","filters","fromNow","time","between","Date","now","Number","domain","url","href","hostname","riot","tag","self","this","currentView","loadView","viewName","id","unmount","data","bind","studyRoute","view","route","on","exec","opts","store","fetchUser","user","about","innerHTML","update","items","fetchComments","fetchItems","kids","comments","fetchPollOptions","parts","options","pollOptions","fetchItem","item","type","page","fetchNews","fetchItemsByPage","displayPage","removeListener","loopKeys","expr","ret","val","els","split","brackets","slice","length","trim","key","pos","mkitem","_each","dom","parent","add","rendered","splice","tags","remAttr","checksum","template","outerHTML","prev","previousSibling","root","parentNode","one","removeChild","stub","tmpl","Array","isArray","testsum","JSON","stringify","each","Object","keys","map","arrDiff","indexOf","nodes","childNodes","prev_index","call","i","oldPos","lastIndexOf","Tag","before","loop","insertBefore","parseNamedElements","walk","nodeType","attributes","attr","test","name","value","parseLayout","expressions","addExpr","extra","push","extend","tagName","nodeValue","getAttribute","bool","impl","tag_impl","toLowerCase","conf","updateOpts","trigger","is_loop","loop_dom","firstChild","appendChild","observable","inherit","mkdom","el","p","off","fn","setEventHandler","handler","e","window","event","which","charCode","keyCode","target","srcElement","currentTarget","preventDefault","returnValue","insertTo","node","attr_name","createTextNode","style","display","setAttribute","len","removeAttribute","obj","from","from2","tag_name","root_tag","nextSibling","arr1","arr2","filter","Child","prototype","injectStyle","css","head","mountTo","virtual_dom","version","settings","callbacks","_id","events","replace","typed","cb","arr","args","arguments","fns","busy","apply","concat","evt","hash","loc","path","emit","current","top","location","win","r","arg","addEventListener","attachEvent","orig","s","b","x","RegExp","source","global","re_expr","Function","join","n","_","k","v","wrap","nonull","re_vars","cache","str","html","selector","querySelectorAll","util","exports","module","define","amd","open","commentcontent","text","toggle","itemdata","showInfo","showDomain","api","Firebase","storiesPerPage","cachedStoryIds","Emitter","EventEmitter","child","snapshot","once","ids","addItem","forEach","start","end","_events","_maxListeners","undefined","isFunction","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","TypeError","er","listeners","error","Error","addListener","listener","m","newListener","warned","console","trace","g","fired","list","position","removeAllListeners","listenerCount","emitter"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","require('./filters.js')\nrequire('./app.html')\nrequire('riot').mount('app')\n","var parser = document.createElement('a')\n\nfilters = {\n  fromNow: function(time) {\n    var between = Date.now() / 1000 - Number(time)\n    if (between < 3600) {\n      return ~~(between / 60) + ' minutes'\n    } else if (between < 86400) {\n      return ~~(between / 3600) + ' hours'\n    } else {\n      return ~~(between / 86400) + ' days'\n    }\n  },\n  domain: function(url) {\n    parser.href = url\n    return parser.hostname\n  }\n}\n","var riot = require('riot');\nriot.tag('app', '<div id=\"header\"> <a id=\"yc\" href=\"http://www.ycombinator.com\"> <img src=\"https://news.ycombinator.com/y18.gif\"> </a> <h1><a href=\"#\">Hacker News</a></h1> <span class=\"source\"> Built with <a href=\"https://muut.com/riotjs/\" target=\"_blank\">Riot.js</a> | <a href=\"https://github.com/txchen/riot-hn\" target=\"_blank\">Source</a> </span> </div> <div id=\"hnview\"></div>', function(opts) {\n  var self = this\n  self.currentView = null\n\n  this.loadView = function(viewName, id) {\n    if (self.currentView) {\n      self.currentView.unmount()\n    }\n    self.currentView = riot.mount('div#hnview', viewName, {data: id})[0]\n  }.bind(this);\n\n  this.studyRoute = function(view, id) {\n    switch(view) {\n    case 'user':\n      require('./views/user-view.html')\n      self.loadView('user-view', id)\n      break\n    case 'item':\n      require('./views/item-view.html')\n      self.loadView('item-view', id)\n      break\n    case 'news':\n      require('./views/news-view.html')\n      self.loadView('news-view', id)\n      break\n    default:\n      riot.route('news/1')\n    }\n  }.bind(this);\n  riot.route(self.studyRoute)\n  this.on('mount', function() {\n    riot.route.exec(self.studyRoute)\n  })\n  \n});\n","var riot = require('riot');\nriot.tag('user-view', '<div class=\"view user-view\" show=\"{ user }\"> <ul> <li><span class=\"label\">user:</span> { user.id }</li> <li><span class=\"label\">created:</span> { filters.fromNow(user.created) } ago</li> <li><span class=\"label\">karma:</span> { user.karma }</li> <li> <span class=\"label\">about:</span> <div class=\"about\" name=\"about\"></div> </li> </ul> <p class=\"links\"> <a href=\"https://news.ycombinator.com/submitted?id={ user.id }\">submissions</a><br> <a href=\"https://news.ycombinator.com/threads?id={ user.id }\">comments</a> </p> </div>', function(opts) {\n  var store = require('../store')\n  var self = this\n  self.on('mount', function() {\n    store.fetchUser(opts.data, function (user) {\n      self.user = user\n      self.about.innerHTML = self.user.about\n      self.update()\n    })\n  })\n  \n});\n","var riot = require('riot');\nriot.tag('item-view', '<div class=\"view item-view\" show=\"{ items.length }\"> <item class=\"item\" each=\"{ items }\" data=\"{ this }\"></item> <ul class=\"poll-options\" if=\"{ pollOptions }\"> <li each=\"{ pollOptions }\"> <p>{ text }</p> <p class=\"subtext\">{ score } points</p> </li> </ul> <ul class=\"comments\" if=\"{ comments }\"> <comment each=\"{ comments }\" data=\"{ this }\"></comment> </ul> <p show=\"{ !comments.length }\">No comments yet.</p> </div>', function(opts) {\n  require('../components/item.html')\n  require('../components/comment.html')\n  var store = require('../store')\n  var self = this\n  self.items = []\n\n  this.fetchComments = function() {\n    store.fetchItems(self.items[0].kids, function (comments) {\n      self.comments = comments\n      self.update()\n    })\n  }.bind(this);\n\n  this.fetchPollOptions = function() {\n    store.fetchItems(self.items[0].parts, function (options) {\n      self.pollOptions = options\n      self.update()\n    })\n  }.bind(this);\n\n  self.on('mount', function() {\n    store.fetchItem(opts.data, function (item) {\n      self.items = [ item ]\n      self.fetchComments()\n      if (item.type === 'poll') {\n        self.fetchPollOptions()\n      }\n      self.update()\n    })\n  })\n  \n});\n","var riot = require('riot');\nriot.tag('news-view', '<div class=\"view news-view\" class=\"{loading: !items.length}\"> <ul> <li class=\"item\" each=\"{ item, i in items }\" track-by=\"id\"> <item data=\"{ item }\" index=\"{ (parent.page - 1) * 30 + i + 1}\" ></item> </li> </ul> <div class=\"nav\" show=\"{ items.length }\"> <a if=\"{ page > 1 }\" href=\"#news/{ page - 1 }\">&lt; prev</a> <a if=\"{ page < 4 }\" href=\"#news/{ page - -1 }\">more...</a> </div> </div>', function(opts) {\n  require('../components/item.html')\n  var store = require('../store')\n  var self = this\n  self.page = opts.data\n  self.items = []\n\n  this.fetchNews = function() {\n    store.fetchItemsByPage(self.page, function (items) {\n      self.items = items\n      self.displayPage = self.page\n      self.update()\n    })\n  }.bind(this);\n\n  self.on('mount', function() {\n    self.fetchNews()\n    store.on('update', self.fetchNews)\n  })\n\n  self.on('unmount', function() {\n    store.removeListener('update', self.fetchNews)\n  })\n  \n});\n","/* Riot v2.0.11, @license MIT, (c) 2015 Muut Inc. + contributors */\n\n;(function() {\n\n  var riot = { version: 'v2.0.11', settings: {} }\n\n  'use strict'\n\nriot.observable = function(el) {\n\n  el = el || {}\n\n  var callbacks = {},\n      _id = 0\n\n  el.on = function(events, fn) {\n    if (typeof fn == 'function') {\n      fn._id = typeof fn._id == 'undefined' ? _id++ : fn._id\n\n      events.replace(/\\S+/g, function(name, pos) {\n        (callbacks[name] = callbacks[name] || []).push(fn)\n        fn.typed = pos > 0\n      })\n    }\n    return el\n  }\n\n  el.off = function(events, fn) {\n    if (events == '*') callbacks = {}\n    else {\n      events.replace(/\\S+/g, function(name) {\n        if (fn) {\n          var arr = callbacks[name]\n          for (var i = 0, cb; (cb = arr && arr[i]); ++i) {\n            if (cb._id == fn._id) { arr.splice(i, 1); i-- }\n          }\n        } else {\n          callbacks[name] = []\n        }\n      })\n    }\n    return el\n  }\n\n  // only single event supported\n  el.one = function(name, fn) {\n    if (fn) fn.one = 1\n    return el.on(name, fn)\n  }\n\n  el.trigger = function(name) {\n    var args = [].slice.call(arguments, 1),\n        fns = callbacks[name] || []\n\n    for (var i = 0, fn; (fn = fns[i]); ++i) {\n      if (!fn.busy) {\n        fn.busy = 1\n        fn.apply(el, fn.typed ? [name].concat(args) : args)\n        if (fn.one) { fns.splice(i, 1); i-- }\n         else if (fns[i] !== fn) { i-- } // Makes self-removal possible during iteration\n        fn.busy = 0\n      }\n    }\n\n    return el\n  }\n\n  return el\n\n}\n;(function(riot, evt) {\n\n  // browsers only\n  if (!this.top) return\n\n  var loc = location,\n      fns = riot.observable(),\n      win = window,\n      current\n\n  function hash() {\n    return loc.hash.slice(1)\n  }\n\n  function parser(path) {\n    return path.split('/')\n  }\n\n  function emit(path) {\n    if (path.type) path = hash()\n\n    if (path != current) {\n      fns.trigger.apply(null, ['H'].concat(parser(path)))\n      current = path\n    }\n  }\n\n  var r = riot.route = function(arg) {\n    // string\n    if (arg[0]) {\n      loc.hash = arg\n      emit(arg)\n\n    // function\n    } else {\n      fns.on('H', arg)\n    }\n  }\n\n  r.exec = function(fn) {\n    fn.apply(null, parser(hash()))\n  }\n\n  r.parser = function(fn) {\n    parser = fn\n  }\n\n  win.addEventListener ? win.addEventListener(evt, emit, false) : win.attachEvent('on' + evt, emit)\n\n})(riot, 'hashchange')\n/*\n\n//// How it works?\n\n\nThree ways:\n\n1. Expressions: tmpl('{ value }', data).\n   Returns the result of evaluated expression as a raw object.\n\n2. Templates: tmpl('Hi { name } { surname }', data).\n   Returns a string with evaluated expressions.\n\n3. Filters: tmpl('{ show: !done, highlight: active }', data).\n   Returns a space separated list of trueish keys (mainly\n   used for setting html classes), e.g. \"show highlight\".\n\n\n// Template examples\n\ntmpl('{ title || \"Untitled\" }', data)\ntmpl('Results are { results ? \"ready\" : \"loading\" }', data)\ntmpl('Today is { new Date() }', data)\ntmpl('{ message.length > 140 && \"Message is too long\" }', data)\ntmpl('This item got { Math.round(rating) } stars', data)\ntmpl('<h1>{ title }</h1>{ body }', data)\n\n\n// Falsy expressions in templates\n\nIn templates (as opposed to single expressions) all falsy values\nexcept zero (undefined/null/false) will default to empty string:\n\ntmpl('{ undefined } - { false } - { null } - { 0 }', {})\n// will return: \" - - - 0\"\n\n*/\n\n\nvar brackets = (function(orig, s, b) {\n  return function(x) {\n\n    // make sure we use the current setting\n    s = riot.settings.brackets || orig\n    if (b != s) b = s.split(' ')\n\n    // if regexp given, rewrite it with current brackets (only if differ from default)\n    // else, get brackets\n    return x && x.test\n      ? s == orig\n        ? x : RegExp(x.source\n                      .replace(/\\{/g, b[0].replace(/(?=.)/g, '\\\\'))\n                      .replace(/\\}/g, b[1].replace(/(?=.)/g, '\\\\')),\n                    x.global ? 'g' : '')\n      : b[x]\n\n  }\n})('{ }')\n\n\nvar tmpl = (function() {\n\n  var cache = {},\n      re_expr = /({[\\s\\S]*?})/,\n      re_vars = /(['\"\\/]).*?[^\\\\]\\1|\\.\\w*|\\w*:|\\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\\b|function *\\()|([a-z_]\\w*)/gi\n              // [ 1               ][ 2  ][ 3 ][ 4                                                                                  ][ 5       ]\n              // find variable names:\n              // 1. skip quoted strings and regexps: \"a b\", 'a b', 'a \\'b\\'', /a b/\n              // 2. skip object properties: .name\n              // 3. skip object literals: name:\n              // 4. skip javascript keywords\n              // 5. match var name\n\n  // build a template (or get it from cache), render with data\n  return function(str, data) {\n    return str && (cache[str] = cache[str] || tmpl(str))(data)\n  }\n\n\n  // create a template instance\n\n  function tmpl(s, p) {\n\n    // default template string to {}\n    p = (s || (brackets(0) + brackets(1)))\n\n      // temporarily convert \\{ and \\} to a non-character\n      .replace(brackets(/\\\\{/), '\\uFFF0')\n      .replace(brackets(/\\\\}/), '\\uFFF1')\n\n      // split string to expression and non-expresion parts\n      .split(brackets(re_expr))\n\n    return new Function('d', 'return ' + (\n\n      // is it a single expression or a template? i.e. {x} or <b>{x}</b>\n      !p[0] && !p[2] && !p[3]\n\n        // if expression, evaluate it\n        ? expr(p[1])\n\n        // if template, evaluate all expressions in it\n        : '[' + p.map(function(s, i) {\n\n            // is it an expression or a string (every second part is an expression)\n          return i % 2\n\n              // evaluate the expressions\n              ? expr(s, 1)\n\n              // process string parts of the template:\n              : '\"' + s\n\n                  // preserve new lines\n                  .replace(/\\n/g, '\\\\n')\n\n                  // escape quotes\n                  .replace(/\"/g, '\\\\\"')\n\n                + '\"'\n\n        }).join(',') + '].join(\"\")'\n      )\n\n      // bring escaped { and } back\n      .replace(/\\uFFF0/g, brackets(0))\n      .replace(/\\uFFF1/g, brackets(1))\n\n    + ';')\n\n  }\n\n\n  // parse { ... } expression\n\n  function expr(s, n) {\n    s = s\n\n      // convert new lines to spaces\n      .replace(/\\n/g, ' ')\n\n      // trim whitespace, curly brackets, strip comments\n      .replace(brackets(/^[{ ]+|[ }]+$|\\/\\*.+?\\*\\//g), '')\n\n    // is it an object literal? i.e. { key : value }\n    return /^\\s*[\\w- \"']+ *:/.test(s)\n\n      // if object literal, return trueish keys\n      // e.g.: { show: isOpen(), done: item.done } -> \"show done\"\n      ? '[' + s.replace(/\\W*([\\w- ]+)\\W*:([^,]+)/g, function(_, k, v) {\n\n        return v.replace(/[^&|=!><]+/g, wrap) + '?\"' + k.trim() + '\":\"\",'\n\n      }) + '].join(\" \")'\n\n      // if js expression, evaluate as javascript\n      : wrap(s, n)\n\n  }\n\n\n  // execute js w/o breaking on errors or undefined vars\n\n  function wrap(s, nonull) {\n    s = s.trim()\n    return !s ? '' : '(function(v){try{v='\n\n        // prefix vars (name => data.name)\n        + (s.replace(re_vars, function(s, _, v) { return v ? '(d.'+v+'===undefined?window.'+v+':d.'+v+')' : s })\n\n          // break the expression if its empty (resulting in undefined value)\n          || 'x')\n\n      + '}finally{return '\n\n        // default to empty string for falsy values except zero\n        + (nonull ? '!v&&v!==0?\"\":v' : 'v')\n\n      + '}}).call(d)'\n  }\n\n})()\n// { key, i in items} -> { key, i, items }\nfunction loopKeys(expr) {\n  var ret = { val: expr },\n      els = expr.split(/\\s+in\\s+/)\n\n  if (els[1]) {\n    ret.val = brackets(0) + els[1]\n    els = els[0].slice(brackets(0).length).trim().split(/,\\s*/)\n    ret.key = els[0]\n    ret.pos = els[1]\n  }\n\n  return ret\n}\n\nfunction mkitem(expr, key, val) {\n  var item = {}\n  item[expr.key] = key\n  if (expr.pos) item[expr.pos] = val\n  return item\n}\n\n\n/* Beware: heavy stuff */\nfunction _each(dom, parent, expr) {\n\n  remAttr(dom, 'each')\n\n  var template = dom.outerHTML,\n      prev = dom.previousSibling,\n      root = dom.parentNode,\n      rendered = [],\n      tags = [],\n      checksum\n\n  expr = loopKeys(expr)\n\n  function add(pos, item, tag) {\n    rendered.splice(pos, 0, item)\n    tags.splice(pos, 0, tag)\n  }\n\n\n  // clean template code after update (and let walk finish it's parse)\n  parent.one('update', function() {\n    root.removeChild(dom)\n\n  }).one('premount', function() {\n    if (root.stub) root = parent.root\n\n  }).on('update', function() {\n\n    var items = tmpl(expr.val, parent)\n    if (!items) return\n\n    // object loop. any changes cause full redraw\n    if (!Array.isArray(items)) {\n      var testsum = JSON.stringify(items)\n      if (testsum == checksum) return\n      checksum = testsum\n\n      // clear old items\n      each(tags, function(tag) { tag.unmount() })\n      rendered = []\n      tags = []\n\n      items = Object.keys(items).map(function(key) {\n        return mkitem(expr, key, items[key])\n      })\n\n    }\n\n    // unmount redundant\n    each(arrDiff(rendered, items), function(item) {\n      var pos = rendered.indexOf(item),\n          tag = tags[pos]\n\n      if (tag) {\n        tag.unmount()\n        rendered.splice(pos, 1)\n        tags.splice(pos, 1)\n      }\n\n    })\n\n    // mount new / reorder\n    var nodes = root.childNodes,\n        prev_index = [].indexOf.call(nodes, prev)\n\n    each(items, function(item, i) {\n\n      // start index search from position based on the current i\n      var pos = items.indexOf(item, i),\n          oldPos = rendered.indexOf(item, i)\n\n      // if not found, search backwards from current i position\n      pos < 0 && (pos = items.lastIndexOf(item, i))\n      oldPos < 0 && (oldPos = rendered.lastIndexOf(item, i))\n\n      // mount new\n      if (oldPos < 0) {\n        if (!checksum && expr.key) item = mkitem(expr, item, pos)\n\n        var tag = new Tag({ tmpl: template }, {\n          before: nodes[prev_index + 1 + pos],\n          parent: parent,\n          root: root,\n          loop: true,\n          item: item\n        })\n\n        return add(pos, item, tag)\n      }\n\n      // change pos value\n      if (expr.pos && tags[oldPos][expr.pos] != pos) {\n        tags[oldPos].one('update', function(item) {\n          item[expr.pos] = pos\n        })\n        tags[oldPos].update()\n      }\n\n      // reorder\n      if (pos != oldPos) {\n        root.insertBefore(nodes[prev_index + oldPos + 1], nodes[prev_index + pos + 1])\n        return add(pos, rendered.splice(oldPos, 1)[0], tags.splice(oldPos, 1)[0])\n      }\n\n    })\n\n    rendered = items.slice()\n\n  })\n\n}\n\nfunction parseNamedElements(root, tag, expressions) {\n  walk(root, function(dom) {\n    if (dom.nodeType == 1) {\n      each(dom.attributes, function(attr) {\n        if (/^(name|id)$/.test(attr.name)) tag[attr.value] = dom\n      })\n    }\n  })\n}\n\nfunction parseLayout(root, tag, expressions) {\n\n  function addExpr(dom, val, extra) {\n    if (val.indexOf(brackets(0)) >= 0) {\n      var expr = { dom: dom, expr: val }\n      expressions.push(extend(expr, extra))\n    }\n  }\n\n  walk(root, function(dom) {\n    var type = dom.nodeType\n\n    // text node\n    if (type == 3 && dom.parentNode.tagName != 'STYLE') addExpr(dom, dom.nodeValue)\n    if (type != 1) return\n\n    /* element */\n\n    // loop\n    var attr = dom.getAttribute('each')\n    if (attr) { _each(dom, tag, attr); return false }\n\n    // attribute expressions\n    each(dom.attributes, function(attr) {\n      var name = attr.name,\n          bool = name.split('__')[1]\n\n      addExpr(dom, attr.value, { attr: bool || name, bool: bool })\n      if (bool) { remAttr(dom, name); return false }\n\n    })\n\n    // custom child tag\n    var impl = tag_impl[dom.tagName.toLowerCase()]\n\n    if (impl) {\n      impl = new Tag(impl, { root: dom, parent: tag })\n      return false\n    }\n\n  })\n}\n\nfunction Tag(impl, conf) {\n\n  var self = riot.observable(this),\n      opts = inherit(conf.opts) || {},\n      dom = mkdom(impl.tmpl),\n      parent = conf.parent,\n      is_loop = conf.loop,\n      expressions = [],\n      root = conf.root,\n      item = conf.item,\n      attr = {},\n      loop_dom\n\n  extend(this, { parent: parent, root: root, opts: opts }, item)\n\n  // grab attributes\n  each(root.attributes, function(el) {\n    attr[el.name] = el.value\n  })\n\n  // options\n  function updateOpts(rem_attr) {\n    each(Object.keys(attr), function(name) {\n      opts[name] = tmpl(attr[name], parent || self)\n    })\n  }\n\n  this.update = function(data, init) {\n    extend(self, data, item)\n    updateOpts()\n    self.trigger('update', item)\n    update(expressions, self, item)\n    self.trigger('updated')\n  }\n\n  this.unmount = function() {\n    var el = is_loop ? loop_dom : root,\n        p = el.parentNode\n\n    if (p) {\n      if (parent) p.removeChild(el)\n      else while (root.firstChild) root.removeChild(root.firstChild)\n      self.trigger('unmount')\n      parent && parent.off('update', self.update).off('unmount', self.unmount)\n      self.off('*')\n    }\n\n  }\n\n  function mount() {\n\n    // internal use only, fixes #403\n    self.trigger('premount')\n\n    if (is_loop) {\n      loop_dom = dom.firstChild\n      root.insertBefore(loop_dom, conf.before || null) // null needed for IE8\n\n    } else {\n      while (dom.firstChild) root.appendChild(dom.firstChild)\n    }\n\n    if (root.stub) self.root = root = parent.root\n\n    // one way data flow: propagate updates and unmounts downwards from parent to children\n    parent && parent.on('update', self.update).one('unmount', self.unmount)\n\n    self.trigger('mount')\n  }\n\n  updateOpts()\n\n  // named elements available for fn\n  parseNamedElements(dom, this)\n\n  // fn (initialiation)\n  if (impl.fn) impl.fn.call(this, opts)\n\n  // parse layout after init. fn may calculate args for nested custom tags\n  parseLayout(dom, this, expressions)\n\n  this.update()\n  mount()\n\n}\n\nfunction setEventHandler(name, handler, dom, tag, item) {\n\n  dom[name] = function(e) {\n\n    // cross browser event fix\n    e = e || window.event\n    e.which = e.which || e.charCode || e.keyCode\n    e.target = e.target || e.srcElement\n    e.currentTarget = dom\n    e.item = item\n\n    // prevent default behaviour (by default)\n    if (handler.call(tag, e) !== true) {\n      e.preventDefault && e.preventDefault()\n      e.returnValue = false\n    }\n\n    var el = item ? tag.parent : tag\n    el.update()\n\n  }\n\n}\n\n// used by if- attribute\nfunction insertTo(root, node, before) {\n  if (root) {\n    root.insertBefore(before, node)\n    root.removeChild(node)\n  }\n}\n\n// item = currently looped item\nfunction update(expressions, tag, item) {\n\n  each(expressions, function(expr) {\n\n    var dom = expr.dom,\n        attr_name = expr.attr,\n        value = tmpl(expr.expr, tag)\n\n    if (value == null) value = ''\n\n    // no change\n    if (expr.value === value) return\n    expr.value = value\n\n    // text node\n    if (!attr_name) return dom.nodeValue = value\n\n    // remove original attribute\n    remAttr(dom, attr_name)\n\n    // event handler\n    if (typeof value == 'function') {\n      setEventHandler(attr_name, value, dom, tag, item)\n\n    // if- conditional\n    } else if (attr_name == 'if') {\n      var stub = expr.stub\n\n      // add to DOM\n      if (value) {\n        stub && insertTo(stub.parentNode, stub, dom)\n\n      // remove from DOM\n      } else {\n        stub = expr.stub = stub || document.createTextNode('')\n        insertTo(dom.parentNode, dom, stub)\n      }\n\n    // show / hide\n    } else if (/^(show|hide)$/.test(attr_name)) {\n      if (attr_name == 'hide') value = !value\n      dom.style.display = value ? '' : 'none'\n\n    // field value\n    } else if (attr_name == 'value') {\n      dom.value = value\n\n    // <img src=\"{ expr }\">\n    } else if (attr_name.slice(0, 4) == 'riot') {\n      attr_name = attr_name.slice(5)\n      value ? dom.setAttribute(attr_name, value) : remAttr(dom, attr_name)\n\n    } else {\n      if (expr.bool) {\n        dom[attr_name] = value\n        if (!value) return\n        value = attr_name\n      }\n\n      if (typeof value != 'object') dom.setAttribute(attr_name, value)\n\n    }\n\n  })\n\n}\nfunction each(els, fn) {\n  for (var i = 0, len = (els || []).length, el; i < len; i++) {\n    el = els[i]\n    // return false -> reomve current item during loop\n    if (el != null && fn(el, i) === false) i--\n  }\n  return els\n}\n\nfunction remAttr(dom, name) {\n  dom.removeAttribute(name)\n}\n\n// max 2 from objects allowed\nfunction extend(obj, from, from2) {\n  from && each(Object.keys(from), function(key) {\n    obj[key] = from[key]\n  })\n  return from2 ? extend(obj, from2) : obj\n}\n\nfunction mkdom(template) {\n  var tag_name = template.trim().slice(1, 3).toLowerCase(),\n      root_tag = /td|th/.test(tag_name) ? 'tr' : tag_name == 'tr' ? 'tbody' : 'div',\n      el = document.createElement(root_tag)\n\n  el.stub = true\n  el.innerHTML = template\n  return el\n}\n\nfunction walk(dom, fn) {\n  if (dom) {\n    if (fn(dom) === false) walk(dom.nextSibling, fn)\n    else {\n      dom = dom.firstChild\n\n      while (dom) {\n        walk(dom, fn)\n        dom = dom.nextSibling\n      }\n    }\n  }\n}\n\nfunction arrDiff(arr1, arr2) {\n  return arr1.filter(function(el) {\n    return arr2.indexOf(el) < 0\n  })\n}\n\nfunction inherit(parent) {\n  function Child() {}\n  Child.prototype = parent\n  return new Child()\n}\n\n\n/*\n Virtual dom is an array of custom tags on the document.\n Updates and unmounts propagate downwards from parent to children.\n*/\n\nvar virtual_dom = [],\n    tag_impl = {}\n\nfunction injectStyle(css) {\n  var node = document.createElement('style')\n  node.innerHTML = css\n  document.head.appendChild(node)\n}\n\nfunction mountTo(root, tagName, opts) {\n  var tag = tag_impl[tagName]\n\n  if (tag && root) {\n    tag = new Tag(tag, { root: root, opts: opts })\n    virtual_dom.push(tag)\n    return tag.on('unmount', function() {\n      virtual_dom.splice(virtual_dom.indexOf(tag), 1)\n    })\n  }\n}\n\nriot.tag = function(name, html, css, fn) {\n  if (typeof css == 'function') fn = css\n  else if (css) injectStyle(css)\n  tag_impl[name] = { name: name, tmpl: html, fn: fn }\n}\n\nriot.mount = function(selector, tagName, opts) {\n  if (selector == '*') selector = Object.keys(tag_impl).join(', ')\n  if (typeof tagName == 'object') { opts = tagName; tagName = 0 }\n\n  var tags = []\n\n  function push(root) {\n    var name = tagName || root.tagName.toLowerCase(),\n        tag = mountTo(root, name, opts)\n\n    if (tag) tags.push(tag)\n  }\n\n  // DOM node\n  if (selector.tagName) {\n    push(selector)\n    return tags[0]\n\n  // selector\n  } else {\n    each(document.querySelectorAll(selector), push)\n    return tags\n  }\n\n}\n\n// update everything\nriot.update = function() {\n  return each(virtual_dom, function(tag) {\n    tag.update()\n  })\n}\n\n// @depreciated\nriot.mountTo = riot.mount\n\n\n  \n  // share methods for other riot parts, e.g. compiler\n  riot.util = { brackets: brackets, tmpl: tmpl }\n\n  // support CommonJS\n  if (typeof exports === 'object')\n    module.exports = riot\n\n  // support AMD\n  else if (typeof define === 'function' && define.amd)\n    define(function() { return riot })\n\n  // support browser\n  else\n    this.riot = riot\n\n})();\n","var riot = require('riot');\nriot.tag('comment', '<li show=\"{ data.text }\"> <div class=\"comhead\"> <a class=\"toggle\" onclick=\"{ toggle }\">{ open ? \\'[-]\\' : \\'[+]\\' }</a> <a href=\"#user/{ data.by }\">{ data.by }</a> { filters.fromNow(data.time) } ago </div> <div class=\"comment-content\" name=\"commentcontent\" show=\"{ open }\"></div> <ul class=\"child-comments\" if=\"{ data.kids }\" show=\"{ open }\"> <comment each=\"{ comments }\" data=\"{ this }\"></comment> </ul> </li>', function(opts) {\n  var store = require('../store')\n  var self = this\n  self.data = opts.data\n  self.open = true\n\n  this.on('mount', function() {\n    store.fetchItems(self.data.kids, function(comments) {\n      self.comments = comments\n      self.update()\n    })\n    self.commentcontent.innerHTML = self.data.text\n  })\n\n  this.toggle = function(e) {\n    this.open = !this.open\n  }.bind(this);\n  \n});\n","var riot = require('riot');\nriot.tag('item', '<span class=\"index\">{ opts.index }.</span> <p> <a class=\"title\" href=\"{ href() }\" target=\"_blank\">{ itemdata.title }</a> <span class=\"domain\" show=\"{ showDomain() }\"> ({ filters.domain(itemdata.url) }) </span> </p> <p class=\"subtext\"> <span show=\"{ showInfo() }\"> { itemdata.score } points by <a href=\"#user/{ itemdata.by }\">{ itemdata.by }</a> </span> { filters.fromNow(itemdata.time) } ago <span class=\"comments-link\" show=\"{ showInfo() }\"> | <a href=\"#item/{ itemdata.id }\">comments</a> </span> </p>', function(opts) {\n  var self = this\n  self.itemdata = opts.data\n\n  this.href = function() {\n    return self.itemdata.url || ('#/item/' + self.itemdata.id)\n  }.bind(this);\n\n  this.showInfo = function() {\n    return self.itemdata.type === 'story' || self.itemdata.type === 'poll'\n  }.bind(this);\n\n  this.showDomain = function() {\n    return self.itemdata.type === 'story'\n  }.bind(this);\n  \n});\n","//var Firebase = require('firebase')\nvar api = new Firebase('https://hacker-news.firebaseio.com/v0')\nvar storiesPerPage = 30\nvar cachedStoryIds = []\nvar Emitter = require('events').EventEmitter\nvar store = module.exports = new Emitter()\n\n/**\n * Subscribe to real time updates of the top 100 stories,\n * and cache the IDs locally.\n */\n\napi.child('topstories').on('value', function (snapshot) {\n  cachedStoryIds = snapshot.val()\n  store.emit('update')\n})\n\n/**\n * Fetch an item data with given id.\n *\n * @param {Number} id\n * @param {Function} cb(item)\n */\n\nstore.fetchItem = function (id, cb) {\n  api.child('item/' + id).once('value', function (snapshot) {\n    cb(snapshot.val())\n  })\n}\n\n/**\n * Fetch a user data with given id.\n *\n * @param {Number} id\n * @param {Function} cb(user)\n */\n\nstore.fetchUser = function (id, cb) {\n  api.child('user/' + id).once('value', function (snapshot) {\n    cb(snapshot.val())\n  })\n}\n\n/**\n * Fetch the given list of items.\n *\n * @param {Array<Number>} ids\n * @param {Function} cb(items)\n */\n\nstore.fetchItems = function (ids, cb) {\n  if (!ids || !ids.length) return cb([])\n  var items = []\n  ids.forEach(function (id) {\n    store.fetchItem(id, addItem)\n  })\n  function addItem (item) {\n    items.push(item)\n    if (items.length >= ids.length) {\n      cb(items)\n    }\n  }\n}\n\n/**\n * Fetch items for the given page.\n *\n * @param {Number} page\n * @param {Function} cb(stories)\n */\n\nstore.fetchItemsByPage = function (page, cb) {\n  var start = (page - 1) * storiesPerPage\n  var end = page * storiesPerPage\n  var ids = cachedStoryIds.slice(start, end)\n  store.fetchItems(ids, cb)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n"]}