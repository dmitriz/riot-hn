(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
},{}],2:[function(require,module,exports){
!function(){function t(t){var n={val:t},e=t.split(/\s+in\s+/);return e[1]&&(n.val=h+e[1],e=e[0].slice(h.length).trim().split(/,\s*/),n.key=e[0],n.pos=e[1]),n}function n(t,n,e){var r={};return r[t.key]=n,t.pos&&(r[t.pos]=e),r}function e(e,r,i){l(e,"each");var u,a=e.outerHTML,f=e.previousSibling,c=e.parentNode,s=[],p=[];i=t(i),r.one("update",function(){c.removeChild(e)}).one("mount",function(){c.stub&&(c=r.root)}).on("update",function(){var t=g(i.val,r);if(t){if(!Array.isArray(t)){var e=JSON.stringify(t);if(e==u)return;u=e,p.map(function(t){t.unmount()}),p=s=[],t=Object.keys(t).map(function(e){return n(i,e,t[e])})}v(s,t).map(function(t){var n=s.indexOf(t),e=p[n];e&&(e.unmount(),s.splice(n,1),p.splice(n,1))});var l=c.childNodes,d=[].indexOf.call(l,f);v(t,s).map(function(e){var f=t.indexOf(e);!u&&i.key&&(e=n(i,e,f));var s=new o({tmpl:a},{before:l[d+1+f],parent:r,root:c,loop:!0,item:e});p.splice(f,0,s)}),s=t.slice()}})}function r(t,n){d(t,function(t){1==t.nodeType&&c(t.attributes,function(e){/^(name|id)$/.test(e.name)&&(n[e.value]=t)})})}function i(t,n,r){function i(t,n,e){if(n.indexOf(h)>=0){var i={dom:t,expr:n};r.push(s(i,e))}}d(t,function(t){var r=t.nodeType;if(3==r&&"STYLE"!=t.parentNode.tagName&&i(t,t.nodeValue),1==r){var u=t.getAttribute("each");if(u)return e(t,n,u),!1;c(t.attributes,function(n){var e=n.name,r=n.value,o=e.split("__")[1];return i(t,r,{attr:o||e,bool:o}),o?(l(t,e),!1):void 0});var a=y[t.tagName.toLowerCase()];a&&(a=new o(a,{root:t,parent:n}))}})}function o(t,n){function e(){Object.keys(d).map(function(t){w[t]=g(d[t],v||u)})}function o(){if(b)j=C.firstChild,y.insertBefore(j,n.before||null);else for(;C.firstChild;)y.appendChild(C.firstChild);y.stub&&(u.root=y=v.root),u.trigger("mount"),v&&v.on("update",u.update).one("unmount",u.unmount)}var u=m.observable(this),a=[],d={},v=n.parent,b=n.loop,y=n.root,w=n.opts,x=n.item;if(b||!y.riot){y.riot=1,w=w||{},s(this,{parent:v,root:y,opts:w}),s(this,x),c(y.attributes,function(t){var n=t.name,e=t.value;return d[n]=e,e.indexOf(h)>=0?(l(y,n),!1):void 0}),e();var j,C=p(t.tmpl);r(C,this),this.update=function(t){s(u,t),s(u,x),u.trigger("update"),e(),f(a,u,x),u.trigger("updated")},this.unmount=function(){var t=b?j:y,n=t.parentNode;n&&(n.removeChild(t),u.trigger("unmount"),v&&v.off("update",u.update))},t.fn&&t.fn.call(this,w),i(C,this,a),this.update(),o()}}function u(t,n,e,r,i){e[t]=function(t){t=t||window.event,t.which=t.which||t.charCode||t.keyCode,t.target=t.target||t.srcElement,t.currentTarget=e,t.item=i,n.call(r,t)!==!0&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),r.update()}}function a(t,n,e){t&&(t.insertBefore(e,n),t.removeChild(n))}function f(t,n,e){c(t,function(t){var r=t.dom,i=t.attr,o=g(t.expr,n);if(null==o&&(o=""),t.value!==o){if(t.value=o,!i)return r.nodeValue=o;if((!o&&t.bool||/obj|func/.test(typeof o))&&l(r,i),"function"==typeof o)u(i,o,r,n,e);else if("if"==i){l(r,i);var f=t.stub;o?f&&a(f.parentNode,f,r):(f=t.stub=f||document.createTextNode(""),a(r.parentNode,r,f))}else if(/^(show|hide)$/.test(i))l(r,i),"hide"==i&&(o=!o),r.style.display=o?"":"none";else if("value"==i)r.value=o;else{if(t.bool){if(r[i]=o,!o)return;o=i}r.setAttribute(i,o)}}})}function c(t,n){for(var e=0;e<(t||[]).length;e++)n(t[e],e)===!1&&e--}function l(t,n){t.removeAttribute(n)}function s(t,n){return n&&Object.keys(n).map(function(e){t[e]=n[e]}),t}function p(t){var n=t.trim().slice(1,3).toLowerCase(),e=/td|th/.test(n)?"tr":"tr"==n?"tbody":"div",r=document.createElement(e);return r.stub=!0,r.innerHTML=t,r}function d(t,n){for(t=n(t)===!1?t.nextSibling:t.firstChild;t;)d(t,n),t=t.nextSibling}function v(t,n){return t.filter(function(t){return n.indexOf(t)<0})}var m={version:"v2.0.9",settings:{}};m.observable=function(t){t=t||{};var n={},e=0;return t.on=function(r,i){return"function"==typeof i&&(i._id=e++,r.replace(/\S+/g,function(t,e){(n[t]=n[t]||[]).push(i),i.typed=e>0})),t},t.off=function(e,r){if("*"==e)n={};else if(r)for(var i,o=n[e],u=0;i=o&&o[u];++u)i._id==r._id&&(o.splice(u,1),u--);else e.replace(/\S+/g,function(t){n[t]=[]});return t},t.one=function(n,e){return e&&(e.one=1),t.on(n,e)},t.trigger=function(e){for(var r,i=[].slice.call(arguments,1),o=n[e]||[],u=0;r=o[u];++u)r.busy||(r.busy=1,r.apply(t,r.typed?[e].concat(i):i),r.one?(o.splice(u,1),u--):o[u]!==r&&u--,r.busy=0);return t},t},function(t,n){function e(){return u.hash.slice(1)}function r(t){return t.split("/")}function i(t){t.type&&(t=e()),t!=o&&(a.trigger.apply(null,["H"].concat(r(t))),o=t)}if(this.top){var o,u=location,a=t.observable(),f=window,c=t.route=function(t){t[0]?(u.hash=t,i(t)):a.on("H",t)};c.exec=function(t){t.apply(null,r(e()))},c.parser=function(t){r=t},f.addEventListener?f.addEventListener(n,i,!1):f.attachEvent("on"+n,i)}}(m,"hashchange");var h,g=function(){function t(t,e){return e=(t||i.join("")).replace(r(/\\{/),"￰").replace(r(/\\}/),"￱").split(o),new Function("d","return "+(e[0]||e[2]||e[3]?"["+e.map(function(t,e){return e%2?n(t,1):'"'+t.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1])).replace(/\uFFF0/g,i[0]).replace(/\uFFF1/g,i[1]))}function n(t,n){return t=t.replace(/\n/g," ").replace(r(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+t.replace(/\W*([\w- ]+)\W*:([^,]+)/g,function(t,r,i){return i.replace(/\w[^,|& ]*/g,function(t){return e(t,n)})+'?"'+r.trim()+'":"",'})+'].join(" ")':e(t,n)}function e(t,n){return"(function(v){try{v="+(t.replace(a,function(t,n,e){return e?"(d."+e+"===undefined?window."+e+":d."+e+")":t})||"x")+"}finally{return "+(n?'!v&&v!==0?"":v':"v")+"}}).call(d)"}function r(t){return RegExp(t.source.split("{").join("\\"+i[0]).split("}").join("\\"+i[1]),t.global?"g":"")}var i,o,u={},a=/("|').+?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_]\w*)/gi;return function(n,e){var a=m.settings.brackets||"{ }";return a!=i&&(i=a.split(" "),o=r(/({[\s\S]*?})/)),e?n&&(u[n]=u[n]||t(n))(e):o.test(n)}}(),b=[],y={};m.tag=function(t,n,e){h=h||(m.settings.brackets||"{ }").split(" ")[0],y[t]={name:t,tmpl:n,fn:e}};var w=m.mountTo=function(t,n,e){var r,i=y[n];return i&&t&&(t.riot=0,r=new o(i,{root:t,opts:e})),r?(b.push(r),r.on("unmount",function(){b.splice(b.indexOf(r),1)})):void 0};m.mount=function(t,n){"*"==t&&(t=Object.keys(y).join(", "));var e=[];return c(document.querySelectorAll(t),function(t){var r=t.tagName.toLowerCase(),i=w(t,r,n);i&&e.push(i)}),e},m.update=function(){return b.map(function(t){t.update()}),b},"object"==typeof exports?module.exports=m:"function"==typeof define&&define.amd?define(function(){return m}):this.riot=m}();
},{}],3:[function(require,module,exports){
var riot=require("riot");riot.tag("app",'<div id="header"> <a id="yc" href="http://www.ycombinator.com"> <img src="https://news.ycombinator.com/y18.gif"> </a> <h1><a href="#">Hacker News</a></h1> <span class="source"> Built with <a href="https://muut.com/riotjs/" target="_blank">Riot.js</a> | <a href="https://github.com/txchen/riot-hn" target="_blank">Source</a> </span> </div> <div id="placeholder"></div>',function(){var e=this;this.loadView=function(t,i){var r=document.getElementById("hnview");r&&r.remove();var a=document.getElementById("placeholder");a.insertAdjacentHTML("afterend",'<div id="hnview"></div>'),e.currentview=t+i,riot.mountTo(document.getElementById("hnview"),t,i),e.update()}.bind(this),this.studyRoute=function(t,i){switch(t){case"user":require("./views/user-view.tag"),e.loadView("user-view",i);break;case"item":require("./views/item-view.tag"),e.loadView("item-view",i);break;case"news":require("./views/news-view.tag"),e.loadView("news-view",i);break;default:riot.route("news/1")}}.bind(this),riot.route(e.studyRoute),this.on("mount",function(){riot.route.exec(e.studyRoute)})});
},{"./views/item-view.tag":9,"./views/news-view.tag":10,"./views/user-view.tag":11,"riot":2}],4:[function(require,module,exports){
var riot=require("riot");riot.tag("comment",'<li show="{ data.text }"> <div class="comhead"> <a class="toggle" onclick="{ toggle }">{ open ? \'[-]\' : \'[+]\' }</a> <a href="#user/{ data.by }">{ data.by }</a> { filters.fromNow(data.time) } ago </div> <div class="comment-content" name="commentcontent" show="{ open }"></div> <ul class="child-comments" if="{ data.kids }" show="{ open }"> <comment each="{ comments }" data="{ this }"></comment> </ul> </li>',function(t){var e=require("../store"),o=this;o.data=t.data,o.open=!0,this.on("mount",function(){e.fetchItems(o.data.kids,function(t){o.comments=t,o.update()}),o.commentcontent.innerHTML=o.data.text}),this.toggle=function(){this.open=!this.open}.bind(this)});
},{"../store":8,"riot":2}],5:[function(require,module,exports){
var riot=require("riot");riot.tag("item",'<span class="index">{ opts.index }.</span> <p> <a class="title" href="{ href() }" target="_blank">{ itemdata.title }</a> <span class="domain" show="{ showDomain() }"> ({ filters.domain(itemdata.url) }) </span> </p> <p class="subtext"> <span show="{ showInfo() }"> { itemdata.score } points by <a href="#user/{ itemdata.by }">{ itemdata.by }</a> </span> { filters.fromNow(itemdata.time) } ago <span class="comments-link" show="{ showInfo() }"> | <a href="#item/{ itemdata.id }">comments</a> </span> </p>',function(t){var a=this;a.itemdata=t.data,this.href=function(){return a.itemdata.url||"#/item/"+a.itemdata.id}.bind(this),this.showInfo=function(){return"story"===a.itemdata.type||"poll"===a.itemdata.type}.bind(this),this.showDomain=function(){return"story"===a.itemdata.type}.bind(this)});
},{"riot":2}],6:[function(require,module,exports){
var parser=document.createElement("a");filters={fromNow:function(r){var e=Date.now()/1e3-Number(r);return 3600>e?~~(e/60)+" minutes":86400>e?~~(e/3600)+" hours":~~(e/86400)+" days"},domain:function(r){return parser.href=r,parser.hostname}};
},{}],7:[function(require,module,exports){
require("./filters.js"),require("./app.tag"),require("riot").mount("app");
},{"./app.tag":3,"./filters.js":6,"riot":2}],8:[function(require,module,exports){
var api=new Firebase("https://hacker-news.firebaseio.com/v0"),storiesPerPage=30,cachedStoryIds=[],Emitter=require("events").EventEmitter,store=module.exports=new Emitter;api.child("topstories").on("value",function(e){cachedStoryIds=e.val(),store.emit("update")}),store.fetchItem=function(e,t){api.child("item/"+e).once("value",function(e){t(e.val())})},store.fetchUser=function(e,t){api.child("user/"+e).once("value",function(e){t(e.val())})},store.fetchItems=function(e,t){function r(r){o.push(r),o.length>=e.length&&t(o)}if(!e||!e.length)return t([]);var o=[];e.forEach(function(e){store.fetchItem(e,r)})},store.fetchItemsByPage=function(e,t){var r=(e-1)*storiesPerPage,o=e*storiesPerPage,s=cachedStoryIds.slice(r,o);store.fetchItems(s,t)};
},{"events":1}],9:[function(require,module,exports){
var riot=require("riot");riot.tag("item-view",'<div class="view item-view" show="{ items.length }"> <item class="item" each="{ items }" data="{ this }"></item> <ul class="poll-options" if="{ pollOptions }"> <li each="{ pollOptions }"> <p>{ text }</p> <p class="subtext">{ score } points</p> </li> </ul> <ul class="comments" if="{ comments }"> <comment each="{ comments }" data="{ this }"></comment> </ul> <p show="{ !comments.length }">No comments yet.</p> </div>',function(t){require("../components/item.tag"),require("../components/comment.tag");var e=require("../store"),i=this;i.items=[],this.fetchComments=function(){e.fetchItems(i.items[0].kids,function(t){i.comments=t,i.update()})}.bind(this),this.fetchPollOptions=function(){e.fetchItems(i.items[0].parts,function(t){i.pollOptions=t,i.update()})}.bind(this),i.on("mount",function(){e.fetchItem(t,function(t){i.items=[t],i.fetchComments(),"poll"===t.type&&i.fetchPollOptions(),i.update()})})});
},{"../components/comment.tag":4,"../components/item.tag":5,"../store":8,"riot":2}],10:[function(require,module,exports){
var riot=require("riot");riot.tag("news-view",'<div class="view news-view" class="{loading: !items.length}"> <ul> <li class="item" each="{ item, i in items }" track-by="id"> <item data="{ item }" index="{ (parent.page - 1) * 30 + i + 1}" ></item> </li> </ul> <div class="nav" show="{ items.length }"> <a if="{ opts > 1 }" href="#news/{ opts - 1 }">&lt; prev</a> <a if="{ opts < 4 }" href="#news/{ opts - -1 }">more...</a> </div> </div>',function(e){require("../components/item.tag");var t=require("../store"),i=this;i.page=e,i.items=[],this.fetchNews=function(){t.fetchItemsByPage(i.page,function(e){i.items=e,i.displayPage=i.page,i.update()})}.bind(this),i.on("mount",function(){i.fetchNews(),t.on("update",i.fetchNews)}),i.on("unmount",function(){t.removeListener("update",i.fetchNews)})});
},{"../components/item.tag":5,"../store":8,"riot":2}],11:[function(require,module,exports){
var riot=require("riot");riot.tag("user-view",'<div class="view user-view" show="{ user }"> <ul> <li><span class="label">user:</span> { user.id }</li> <li><span class="label">created:</span> { filters.fromNow(user.created) } ago</li> <li><span class="label">karma:</span> { user.karma }</li> <li> <span class="label">about:</span> <div class="about" name="about"></div> </li> </ul> <p class="links"> <a href="https://news.ycombinator.com/submitted?id={ user.id }">submissions</a><br> <a href="https://news.ycombinator.com/threads?id={ user.id }">comments</a> </p> </div>',function(s){var a=require("../store"),e=this;e.on("mount",function(){a.fetchUser(s,function(s){e.user=s,e.about.innerHTML=e.user.about,e.update()})})});
},{"../store":8,"riot":2}]},{},[7])


//# sourceMappingURL=index.js.map