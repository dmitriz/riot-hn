(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
},{}],2:[function(require,module,exports){
!function(t){function e(t){var e={val:t},n=t.split(/\s+in\s+/);return n[1]&&(e.val=M(0)+n[1],n=n[0].slice(M(0).length).trim().split(/,\s*/),e.key=n[0],e.pos=n[1]),e}function n(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function i(t,i,r){function o(t,e,n){d.splice(t,0,e),g.splice(t,0,n)}l(t,"each");var a,f=t.outerHTML,c=t.previousSibling,p=t.parentNode,d=[],g=[];r=e(r),i.one("update",function(){p.removeChild(t)}).one("premount",function(){p.stub&&(p=i.root)}).on("update",function(){var t=_(r.val,i);if(t){if(!Array.isArray(t)){var e=JSON.stringify(t);if(e==a)return;a=e,s(g,function(t){t.unmount()}),d=[],g=[],t=Object.keys(t).map(function(e){return n(r,e,t[e])})}s(d,function(e){if(e instanceof Object){if(t.indexOf(e)>-1)return}else{var n=w(t,e),i=w(d,e);if(n.length>=i.length)return}var r=d.indexOf(e),o=g[r];return o?(o.unmount(),d.splice(r,1),g.splice(r,1),!1):void 0});var l=[].indexOf.call(p.childNodes,c)+1;s(t,function(e,c){var s=t.indexOf(e,c),v=d.indexOf(e,c);if(0>s&&(s=t.lastIndexOf(e,c)),0>v&&(v=d.lastIndexOf(e,c)),!(e instanceof Object)){var m=w(t,e),h=w(d,e);m.length>h.length&&(v=-1)}var b=p.childNodes;if(0>v){if(!a&&r.key)var y=n(r,e,s);var C=new u({tmpl:f},{before:b[l+s],parent:i,root:p,item:y||e});return C.mount(),o(s,e,C),!0}return r.pos&&g[v][r.pos]!=s&&(g[v].one("update",function(t){t[r.pos]=s}),g[v].update()),s!=v?(p.insertBefore(b[l+v],b[l+(s>v?s+1:s)]),o(s,d.splice(v,1)[0],g.splice(v,1)[0])):void 0}),d=t.slice()}}).one("updated",function(){b(p,function(t){s(t.attributes,function(e){/^(name|id)$/.test(e.name)&&(i[e.value]=t)})})})}function r(t,e,n){b(t,function(t){if(1==t.nodeType){t.isLoop=0,t.parentNode&&t.parentNode.isLoop&&(t.isLoop=1),t.getAttribute("each")&&(t.isLoop=1);var i=A(t);if(i&&!t.isLoop){for(var r,o=new u(i,{root:t,parent:e},t.innerHTML),a=t.getAttribute("name"),f=a&&a.indexOf(M(0))<0?a:i.name,c=e;!A(c.root)&&c.parent;)c=c.parent;o.parent=c,r=c.tags[f],r?(Array.isArray(r)||(c.tags[f]=[r]),c.tags[f].push(o)):c.tags[f]=o,t.innerHTML="",n.push(o)}t.isLoop||s(t.attributes,function(n){/^(name|id)$/.test(n.name)&&(e[n.value]=t)})}})}function o(t,e,n){function r(t,e,i){if(e.indexOf(M(0))>=0){var r={dom:t,expr:e};n.push(d(r,i))}}b(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==n){var o=t.getAttribute("each");return o?(i(t,e,o),!1):(s(t.attributes,function(e){var n=e.name,i=n.split("__")[1];return r(t,e.value,{attr:i||n,bool:i}),i?(l(t,n),!1):void 0}),A(t)?!1:void 0)}})}function u(t,e,n){function i(){s(Object.keys(T),function(t){l[t]=_(T[t],v||f)})}function u(t){if(s(b,function(e){e[t?"mount":"unmount"]()}),v){var e=t?"on":"off";v[e]("update",f.update)[e]("unmount",f.unmount)}}var a,f=N.observable(this),l=L(e.opts)||{},g=h(t.tmpl),v=e.parent,m=[],b=[],y=e.root,x=e.item,w=t.fn,A=y.tagName.toLowerCase(),T={},O=/([\w\-]+)\s?=\s?['"]([^'"]+)["']/gim;if(w&&y._tag&&y._tag.unmount(!0),t.attrs){var E=t.attrs.match(O);s(E,function(t){var e=t.split(/\s?=\s?/);y.setAttribute(e[0],e[1].replace(/['"]/g,""))})}y._tag=this,this._id=p(~~((new Date).getTime()*Math.random())),d(this,{parent:v,root:y,opts:l,tags:{}},x),s(y.attributes,function(t){T[t.name]=t.value}),!g.innerHTML||/select/.test(A)||/tbody/.test(A)||/tr/.test(A)||(g.innerHTML=C(g.innerHTML,n)),this.update=function(t,e){d(f,t,x),i(),f.trigger("update",x),c(m,f,x),f.trigger("updated")},this.mixin=function(){s(arguments,function(t){t="string"==typeof t?N.mixin(t):t,s(Object.keys(t),function(e){"init"!=e&&(f[e]="function"==typeof t[e]?t[e].bind(f):t[e])}),t.init&&t.init.bind(f)()})},this.mount=function(){if(i(),w&&w.call(f,l),u(!0),o(g,f,m),f.parent||f.update(),f.trigger("premount"),w)for(;g.firstChild;)y.appendChild(g.firstChild);else a=g.firstChild,y.insertBefore(a,e.before||null);y.stub&&(f.root=y=v.root),f.parent?f.parent.one("mount",function(){f.trigger("mount")}):f.trigger("mount")},this.unmount=function(t){var e=w?y:a,n=e.parentNode;if(n){if(v)Array.isArray(v.tags[A])?s(v.tags[A],function(t,e){t._id==f._id&&v.tags[A].splice(e,1)}):v.tags[A]=void 0;else for(;e.firstChild;)e.removeChild(e.firstChild);t||n.removeChild(e)}f.trigger("unmount"),u(),f.off("*"),y._tag=null},r(g,this,b)}function a(e,n,i,r,o){i[e]=function(e){if(e=e||t.event,e.which=e.which||e.charCode||e.keyCode,e.target=e.target||e.srcElement,e.currentTarget=i,e.item=o,n.call(r,e)===!0||/radio|check/.test(i.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),!e.preventUpdate){var u=o?r.parent:r;u.update()}}}function f(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function c(t,e,n){s(t,function(t,i){var r=t.dom,o=t.attr,u=_(t.expr,e),c=t.dom.parentNode;if(null==u&&(u=""),c&&"TEXTAREA"==c.tagName&&(u=u.replace(/riot-/g,"")),t.value!==u){if(t.value=u,!o)return r.nodeValue=u.toString();if(l(r,o),"function"==typeof u)a(o,u,r,e,n);else if("if"==o){var s=t.stub;u?s&&f(s.parentNode,s,r):(s=t.stub=s||document.createTextNode(""),f(r.parentNode,r,s))}else if(/^(show|hide)$/.test(o))"hide"==o&&(u=!u),r.style.display=u?"":"none";else if("value"==o)r.value=u;else if("riot-"==o.slice(0,5))o=o.slice(5),u?r.setAttribute(o,u):l(r,o);else{if(t.bool){if(r[o]=u,!u)return;u=o}"object"!=typeof u&&r.setAttribute(o,u)}}})}function s(t,e){for(var n,i=0,r=(t||[]).length;r>i;i++)n=t[i],null!=n&&e(n,i)===!1&&i--;return t}function l(t,e){t.removeAttribute(e)}function p(t){return(t^t>>31)-(t>>31)}function d(t,e,n){return e&&s(Object.keys(e),function(n){t[n]=e[n]}),n?d(t,n):t}function g(){if(t){var e=navigator.userAgent,n=e.indexOf("MSIE ");return n>0?parseInt(e.substring(n+5,e.indexOf(".",n)),10):0}}function v(t,e){var n=document.createElement("option"),i=/value=[\"'](.+?)[\"']/,r=/selected=[\"'](.+?)[\"']/,o=e.match(i),u=e.match(r);n.innerHTML=e,o&&(n.value=o[1]),u&&n.setAttribute("riot-selected",u[1]),t.appendChild(n)}function m(t,e,n){var i=document.createElement("div");i.innerHTML="<table>"+e+"</table>",t.appendChild(/td|th/.test(n)?i.firstChild.firstChild.firstChild.firstChild:i.firstChild.firstChild.firstChild)}function h(t){var e=t.trim().slice(1,3).toLowerCase(),n=/td|th/.test(e)?"tr":"tr"==e?"tbody":"div",i=y(n);return i.stub=!0,"op"===e&&H&&10>H?v(i,t):("tbody"===n||"tr"===n)&&H&&10>H?m(i,t,e):i.innerHTML=t,i}function b(t,e){if(t)if(e(t)===!1)b(t.nextSibling,e);else for(t=t.firstChild;t;)b(t,e),t=t.nextSibling}function y(t){return document.createElement(t)}function C(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gim,e||"")}function x(t,e){return e=e||document,e.querySelectorAll(t)}function w(t,e){return t.filter(function(t){return t===e})}function L(t){function e(){}return e.prototype=t,new e}function g(){if(t){var e=navigator.userAgent,n=e.indexOf("MSIE ");return n>0?parseInt(e.substring(n+5,e.indexOf(".",n)),10):0}}function m(t,e,n){var i,r=y("div"),o=/td|th/.test(n)?3:2;for(r.innerHTML="<table>"+e+"</table>",i=r.firstChild;o--;)i=i.firstChild;t.appendChild(i)}function v(t,e){var n=y("option"),i=/value=[\"'](.+?)[\"']/,r=/selected=[\"'](.+?)[\"']/,o=e.match(i),u=e.match(r);n.innerHTML=e,o&&(n.value=o[1]),u&&n.setAttribute("riot-selected",u[1]),t.appendChild(n)}function A(t){return S[t.getAttribute("riot-tag")||t.tagName.toLowerCase()]}function T(t){E=E||y("style"),document.head&&(E.styleSheet?E.styleSheet.cssText+=t:E.innerHTML+=t,E._rendered||(E.styleSheet?document.body.appendChild(E):document.head.appendChild(E)),E._rendered=!0)}function O(t,e,n){var i=S[e],r=t.innerHTML;return t.innerHTML="",i&&t&&(i=new u(i,{root:t,opts:n},r)),i&&i.mount?(i.mount(),j.push(i),i.on("unmount",function(){j.splice(j.indexOf(i),1)})):void 0}var N={version:"v2.1.0",settings:{}};N.observable=function(t){t=t||{};var e={},n=0;return t.on=function(i,r){return"function"==typeof r&&(r._id="undefined"==typeof r._id?n++:r._id,i.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(r),r.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,r=e[t],o=0;n=r&&r[o];++o)n._id==i._id&&(r.splice(o,1),o--);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,r=[].slice.call(arguments,1),o=e[n]||[],u=0;i=o[u];++u)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(r):r),o[u]!==i&&u--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(r)),t},t},N.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),function(t,e,n){function i(){return a.href.split("#")[1]||""}function r(t){return t.split("/")}function o(t){t.type&&(t=i()),t!=u&&(f.trigger.apply(null,["H"].concat(r(t))),u=t)}if(n){var u,a=n.location,f=t.observable(),c=n,s=!1,l=t.route=function(t){t[0]?(a.hash=t,o(t)):f.on("H",t)};l.exec=function(t){t.apply(null,r(i()))},l.parser=function(t){r=t},l.stop=function(){s&&(c.removeEventListener?c.removeEventListener(e,o,!1):c.detachEvent("on"+e,o),f.off("*"),s=!1)},l.start=function(){s||(c.addEventListener?c.addEventListener(e,o,!1):c.attachEvent("on"+e,o),s=!0)},l.start()}}(N,"hashchange",t);var E,M=function(t,e,n){return function(i){return e=N.settings.brackets||t,n!=e&&(n=e.split(" ")),i&&i.test?e==t?i:RegExp(i.source.replace(/\{/g,n[0].replace(/(?=.)/g,"\\")).replace(/\}/g,n[1].replace(/(?=.)/g,"\\")),i.global?"g":""):n[i]}}("{ }"),_=function(){function e(t,e){return t=(t||M(0)+M(1)).replace(M(/\\{/g),"￰").replace(M(/\\}/g),"￱"),e=r(t,o(t,M(/{/),M(/}/))),new Function("d","return "+(e[0]||e[2]||e[3]?"["+e.map(function(t,e){return e%2?n(t,!0):'"'+t.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1])).replace(/\uFFF0/g,M(0)).replace(/\uFFF1/g,M(1))+";")}function n(t,e){return t=t.replace(/\n/g," ").replace(M(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+o(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':i(t,e)}function i(e,n){return e=e.trim(),e?"(function(v){try{v="+(e.replace(a,function(e,n,i){return i?"(d."+i+"===undefined?"+("undefined"==typeof t?"global.":"window.")+i+":d."+i+")":e})||"x")+"}catch(e){}finally{return "+(n===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function r(t,e){var n=[];return e.map(function(e,i){i=t.indexOf(e),n.push(t.slice(0,i),e),t=t.slice(i+e.length)}),n.concat(t)}function o(t,e,n){var i,r=0,o=[],u=new RegExp("("+e.source+")|("+n.source+")","g");return t.replace(u,function(e,n,u,a){!r&&n&&(i=a),r+=n?1:-1,r||null==u||o.push(t.slice(i,a+u.length))}),o}var u={},a=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,n){return t&&(u[t]=u[t]||e(t))(n)}}(),H=g(),j=[],S={};N.tag=function(t,e,n,i,r){return"function"==typeof i&&(r=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),"function"==typeof n?r=n:n&&T(n),S[t]={name:t,tmpl:e,attrs:i,fn:r},t},N.mount=function(t,e,n){function i(t){e&&!t.getAttribute("riot-tag")&&t.setAttribute("riot-tag",e);var i=e||t.getAttribute("riot-tag")||t.tagName.toLowerCase(),r=O(t,i,n);r&&a.push(r)}var r,o,u=function(){var t=Object.keys(S),e=t.join(", ");return s(t,function(t){e+=', *[riot-tag="'+t.trim()+'"]'}),e},a=[];if("object"==typeof e&&(n=e,e=0),"string"==typeof t?("*"==t?t=o=u():t.split(",").map(function(e){t+=', *[riot-tag="'+e.trim()+'"]'}),r=x(t)):r=t,"*"==e){if(e=o||u(),r.tagName)r=x(e,r);else{var f=[];s(r,function(t){f=x(e,t)}),r=f}e=0}return r.tagName?i(t):s(r,i),a},N.update=function(){return s(j,function(t){t.update()})},N.mountTo=N.mount,N.util={brackets:M,tmpl:_},"object"==typeof exports?module.exports=N:"function"==typeof define&&define.amd?define(function(){return N}):t.riot=N}("undefined"!=typeof window?window:void 0);
},{}],3:[function(require,module,exports){
var riot=require("riot");riot.tag("app",'<div id="header"> <a id="yc" href="http://www.ycombinator.com"> <img src="https://news.ycombinator.com/y18.gif"> </a> <h1><a href="#">Hacker News</a></h1> <span class="source"> Built with <a href="https://muut.com/riotjs/" target="_blank">Riot.js</a> | <a href="https://github.com/txchen/riot-hn" target="_blank">Source</a> </span> </div> <div id="hnview"></div>',function(e){var t=this;t.currentView=null,this.loadView=function(e,i){t.currentView&&t.currentView.unmount(!0),t.currentView=riot.mount("div#hnview",e,{data:i})[0]}.bind(this),this.studyRoute=function(e,i){switch(e){case"user":require("./views/user-view.html"),t.loadView("user-view",i);break;case"item":require("./views/item-view.html"),t.loadView("item-view",i);break;case"news":require("./views/news-view.html"),t.loadView("news-view",i);break;default:riot.route("news/1")}}.bind(this),riot.route(t.studyRoute),this.on("mount",function(){riot.route.exec(t.studyRoute)})});
},{"./views/item-view.html":8,"./views/news-view.html":9,"./views/user-view.html":10,"riot":2}],4:[function(require,module,exports){
var riot=require("riot");riot.tag("comment",'<li show="{ data.text }"> <div class="comhead"> <a class="toggle" onclick="{ toggle }">{ open ? \'[-]\' : \'[+]\' }</a> <a href="#user/{ data.by }">{ data.by }</a> { filters.fromNow(data.time) } ago </div> <div class="comment-content" name="commentcontent" show="{ open }"></div> <ul class="child-comments" if="{ data.kids }" show="{ open }"> <div each="{ c, i in comments }"> <comment data="{ c }"></comment> <div> </ul> </li>',function(t){var e=require("../store"),a=this;a.data=t.data,a.open=!0,a.commentcontent.innerHTML=a.data.text,e.fetchItems(a.data.kids,function(t){a.comments=t,a.update()}),this.toggle=function(t){this.open=!this.open}.bind(this)});
},{"../store":7,"riot":2}],5:[function(require,module,exports){
var riot=require("riot");riot.tag("item",'<span class="index">{ opts.index }.</span> <p> <a class="title" href="{ href() }" target="_blank">{ itemdata.title }</a> <span class="domain" show="{ showDomain() }"> ({ filters.domain(itemdata.url) }) </span> </p> <p class="subtext"> <span show="{ showInfo() }"> { itemdata.score } points by <a href="#user/{ itemdata.by }">{ itemdata.by }</a> </span> { filters.fromNow(itemdata.time) } ago <span class="comments-link" show="{ showInfo() }"> | <a href="#item/{ itemdata.id }">comments</a> </span> </p>',function(t){var a=this;a.itemdata=t.data,this.href=function(){return a.itemdata.url||"#/item/"+a.itemdata.id}.bind(this),this.showInfo=function(){return"story"===a.itemdata.type||"poll"===a.itemdata.type}.bind(this),this.showDomain=function(){return"story"===a.itemdata.type}.bind(this)});
},{"riot":2}],6:[function(require,module,exports){
var parser=document.createElement("a");filters={fromNow:function(r){var e=Date.now()/1e3-Number(r);return 3600>e?~~(e/60)+" minutes":86400>e?~~(e/3600)+" hours":~~(e/86400)+" days"},domain:function(r){return parser.href=r,parser.hostname}};
},{}],7:[function(require,module,exports){
var api=new Firebase("https://hacker-news.firebaseio.com/v0"),storiesPerPage=30,cachedStoryIds=[],Emitter=require("events").EventEmitter,store=module.exports=new Emitter;api.child("topstories").on("value",function(e){cachedStoryIds=e.val(),store.emit("update")}),store.fetchItem=function(e,t){api.child("item/"+e).once("value",function(e){t(e.val())})},store.fetchUser=function(e,t){api.child("user/"+e).once("value",function(e){t(e.val())})},store.fetchItems=function(e,t){function r(r){o.push(r),o.length>=e.length&&t(o)}if(!e||!e.length)return t([]);var o=[];e.forEach(function(e){store.fetchItem(e,r)})},store.fetchItemsByPage=function(e,t){var r=(e-1)*storiesPerPage,o=e*storiesPerPage,s=cachedStoryIds.slice(r,o);store.fetchItems(s,t)};
},{"events":1}],8:[function(require,module,exports){
var riot=require("riot");riot.tag("item-view",'<div class="view item-view" show="{ items.length }"> <item class="item" each="{ items }" data="{ this }"></item> <ul class="poll-options" if="{ pollOptions }"> <li each="{ pollOptions }"> <p>{ text }</p> <p class="subtext">{ score } points</p> </li> </ul> <ul class="comments"> <div each="{ c, i in comments }"> <comment data="{ c }"></comment> </div> </ul> <p show="{ !comments.length }">No comments yet.</p> </div>',function(t){require("../components/item.html"),require("../components/comment.html");var e=require("../store"),i=this;i.items=[],this.fetchComments=function(){e.fetchItems(i.items[0].kids,function(t){i.comments=t,i.update()})}.bind(this),this.fetchPollOptions=function(){e.fetchItems(i.items[0].parts,function(t){i.pollOptions=t,i.update()})}.bind(this),e.fetchItem(t.data,function(t){i.items=[t],i.fetchComments(),"poll"===t.type&&i.fetchPollOptions(),i.update()})});
},{"../components/comment.html":4,"../components/item.html":5,"../store":7,"riot":2}],9:[function(require,module,exports){
var riot=require("riot");riot.tag("news-view",'<div class="view news-view" class="{loading: !items.length}"> <ul> <li class="item" each="{ item, i in items }" track-by="id"> <item data="{ item }" index="{ (parent.page - 1) * 30 + i + 1}" ></item> </li> </ul> <div class="nav" show="{ items.length }"> <a if="{ page > 1 }" href="#news/{ page - 1 }">&lt; prev</a> <a if="{ page < 4 }" href="#news/{ page - -1 }">more...</a> </div> </div>',function(e){require("../components/item.html");var i=require("../store"),t=this;t.page=e.data,t.items=[],this.fetchNews=function(){i.fetchItemsByPage(t.page,function(e){t.items=e,t.displayPage=t.page,t.update()})}.bind(this),t.on("mount",function(){t.fetchNews(),i.on("update",t.fetchNews)}),t.on("unmount",function(){i.removeListener("update",t.fetchNews)})});
},{"../components/item.html":5,"../store":7,"riot":2}],10:[function(require,module,exports){
var riot=require("riot");riot.tag("user-view",'<div class="view user-view" show="{ user }"> <ul> <li><span class="label">user:</span> { user.id }</li> <li><span class="label">created:</span> { filters.fromNow(user.created) } ago</li> <li><span class="label">karma:</span> { user.karma }</li> <li> <span class="label">about:</span> <div class="about" name="about"></div> </li> </ul> <p class="links"> <a href="https://news.ycombinator.com/submitted?id={ user.id }">submissions</a><br> <a href="https://news.ycombinator.com/threads?id={ user.id }">comments</a> </p> </div>',function(s){var a=require("../store"),e=this;e.on("mount",function(){a.fetchUser(s.data,function(s){e.user=s,e.about.innerHTML=e.user.about,e.update()})})});
},{"../store":7,"riot":2}],11:[function(require,module,exports){
require("./filters.js"),require("./app.html"),require("riot").mount("app");
},{"./app.html":3,"./filters.js":6,"riot":2}]},{},[11])


//# sourceMappingURL=index.js.map