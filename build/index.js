(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
},{}],2:[function(require,module,exports){
!function(){function e(e){var t={val:e},n=e.split(/\s+in\s+/);return n[1]&&(t.val=w(0)+n[1],n=n[0].slice(w(0).length).trim().split(/,\s*/),t.key=n[0],t.pos=n[1]),t}function t(e,t,n){var r={};return r[e.key]=t,e.pos&&(r[e.pos]=n),r}function n(n,r,i){function u(e,t,n){d.splice(e,0,t),g.splice(e,0,n)}l(n,"each");var a,f=n.outerHTML,s=n.previousSibling,p=n.parentNode,d=[],g=[];i=e(i),r.one("update",function(){p.removeChild(n)}).one("premount",function(){p.stub&&(p=r.root)}).on("update",function(){var e=x(i.val,r);if(e){if(!Array.isArray(e)){var n=JSON.stringify(e);if(n==a)return;a=n,c(g,function(e){e.unmount()}),d=[],g=[],e=Object.keys(e).map(function(n){return t(i,n,e[n])})}c(d,function(t){if(t instanceof Object){if(e.indexOf(t)>-1)return}else{var n=v(e,t),r=v(d,t);if(n.length>=r.length)return}var i=d.indexOf(t),o=g[i];o&&(o.unmount(),d.splice(i,1),g.splice(i,1))});var l=[].slice.call(p.childNodes),m=l.indexOf(s);c(e,function(n,c){var s=e.indexOf(n,c),h=d.indexOf(n,c);if(0>s&&(s=e.lastIndexOf(n,c)),0>h&&(h=d.lastIndexOf(n,c)),!(n instanceof Object)){var b=v(e,n),y=v(d,n);b.length>y.length&&(h=-1)}if(0>h){d.push(n),!a&&i.key&&(n=t(i,n,s));var w=new o({tmpl:f},{before:l[m+1+s],parent:r,root:p,item:n});return w.mount(),u(s,n,w)}return i.pos&&g[h][i.pos]!=s&&(g[h].one("update",function(e){e[i.pos]=s}),g[h].update()),s!=h?(p.insertBefore(l[m+h+1],l[m+s+1]),u(s,d.splice(h,1)[0],g.splice(h,1)[0])):void 0}),d=e.slice()}})}function r(e,t,n){d(e,function(e){if(1==e.nodeType){var r=m(e);if(r&&!e.getAttribute("each")){var i=new o(r,{root:e,parent:t});t.tags[e.getAttribute("name")||r.name]=i,e.innerHTML="",n.push(i)}c(e.attributes,function(n){/^(name|id)$/.test(n.name)&&(t[n.value]=e)})}})}function i(e,t,r){function i(e,t,n){if(t.indexOf(w(0))>=0){var i={dom:e,expr:t};r.push(s(i,n))}}d(e,function(e){var r=e.nodeType;if(3==r&&"STYLE"!=e.parentNode.tagName&&i(e,e.nodeValue),1==r){var o=e.getAttribute("each");return o?(n(e,t,o),!1):(c(e.attributes,function(t){var n=t.name,r=n.split("__")[1];return i(e,t.value,{attr:r||n,bool:r}),r?(l(e,n),!1):void 0}),m(e)?!1:void 0)}})}function o(e,t){function n(e){c(Object.keys(O),function(e){l[e]=x(O[e],v||a)})}function o(e){if(c(h,function(t){t[e?"mount":"unmount"]()}),v){var t=e?"on":"off";v[t]("update",a.update)[t]("unmount",a.unmount)}}var u,a=y.observable(this),l=g(t.opts)||{},d=p(e.tmpl),v=t.parent,m=[],h=[],b=t.root,w=t.item,C=e.fn,O={};C&&b.riot||(b.riot=!0,s(this,{parent:v,root:b,opts:l,tags:{}},w),c(b.attributes,function(e){O[e.name]=e.value}),this.update=function(e,t){s(a,e,w),n(),a.trigger("update",w),f(m,a,w),a.trigger("updated")},this.mount=function(){if(n(),C&&C.call(a,l),o(!0),i(d,a,m),a.update(),a.trigger("premount"),C)for(;d.firstChild;)b.appendChild(d.firstChild);else u=d.firstChild,b.insertBefore(u,t.before||null);b.stub&&(a.root=b=v.root),a.trigger("mount")},this.unmount=function(){var e=C?b:u,t=e.parentNode;if(t){if(v)t.removeChild(e);else for(;b.firstChild;)b.removeChild(b.firstChild);o(),a.trigger("unmount"),a.off("*"),delete b.riot}},r(d,this,h))}function u(e,t,n,r,i){n[e]=function(e){e=e||window.event,e.which=e.which||e.charCode||e.keyCode,e.target=e.target||e.srcElement,e.currentTarget=n,e.item=i,t.call(r,e)!==!0&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1);var o=i?r.parent:r;o.update()}}function a(e,t,n){e&&(e.insertBefore(n,t),e.removeChild(t))}function f(e,t,n){c(e,function(e){var r=e.dom,i=e.attr,o=x(e.expr,t),f=e.dom.parentNode;if(null==o&&(o=""),f&&"TEXTAREA"==f.tagName&&(o=o.replace(/riot-/g,"")),e.value!==o){if(e.value=o,!i)return r.nodeValue=o;if(l(r,i),"function"==typeof o)u(i,o,r,t,n);else if("if"==i){var c=e.stub;o?c&&a(c.parentNode,c,r):(c=e.stub=c||document.createTextNode(""),a(r.parentNode,r,c))}else if(/^(show|hide)$/.test(i))"hide"==i&&(o=!o),r.style.display=o?"":"none";else if("value"==i)r.value=o;else if("riot-"==i.slice(0,5))i=i.slice(5),o?r.setAttribute(i,o):l(r,i);else{if(e.bool){if(r[i]=o,!o)return;o=i}"object"!=typeof o&&r.setAttribute(i,o)}}})}function c(e,t){for(var n,r=0,i=(e||[]).length;i>r;r++)n=e[r],null!=n&&t(n,r)===!1&&r--;return e}function l(e,t){e.removeAttribute(t)}function s(e,t,n){return t&&c(Object.keys(t),function(n){e[n]=t[n]}),n?s(e,n):e}function p(e){var t=e.trim().slice(1,3).toLowerCase(),n=/td|th/.test(t)?"tr":"tr"==t?"tbody":"div",r=document.createElement(n);return r.stub=!0,r.innerHTML=e,r}function d(e,t){if(e)if(t(e)===!1)d(e.nextSibling,t);else for(e=e.firstChild;e;)d(e,t),e=e.nextSibling}function v(e,t){return e.filter(function(e){return e===t})}function g(e){function t(){}return t.prototype=e,new t}function m(e){return O[e.tagName.toLowerCase()]}function h(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}function b(e,t,n){var r=O[t];return r&&e&&(r=new o(r,{root:e,opts:n})),r&&r.mount?(r.mount(),C.push(r),r.on("unmount",function(){C.splice(C.indexOf(r),1)})):void 0}var y={version:"v2.0.13",settings:{}};y.observable=function(e){e=e||{};var t={},n=0;return e.on=function(r,i){return"function"==typeof i&&(i._id="undefined"==typeof i._id?n++:i._id,r.replace(/\S+/g,function(e,n){(t[e]=t[e]||[]).push(i),i.typed=n>0})),e},e.off=function(n,r){return"*"==n?t={}:n.replace(/\S+/g,function(e){if(r)for(var n,i=t[e],o=0;n=i&&i[o];++o)n._id==r._id&&(i.splice(o,1),o--);else t[e]=[]}),e},e.one=function(t,n){return n&&(n.one=1),e.on(t,n)},e.trigger=function(n){for(var r,i=[].slice.call(arguments,1),o=t[n]||[],u=0;r=o[u];++u)r.busy||(r.busy=1,r.apply(e,r.typed?[n].concat(i):i),r.one?(o.splice(u,1),u--):o[u]!==r&&u--,r.busy=0);return t.all&&"all"!=n&&e.trigger.apply(e,["all",n].concat(i)),e},e},function(e,t){function n(){return u.href.split("#")[1]||""}function r(e){return e.split("/")}function i(e){e.type&&(e=n()),e!=o&&(a.trigger.apply(null,["H"].concat(r(e))),o=e)}if(this.top){var o,u=location,a=e.observable(),f=window,c=e.route=function(e){e[0]?(u.hash=e,i(e)):a.on("H",e)};c.exec=function(e){e.apply(null,r(n()))},c.parser=function(e){r=e},f.addEventListener?f.addEventListener(t,i,!1):f.attachEvent("on"+t,i)}}(y,"hashchange");var w=function(e,t,n){return function(r){return t=y.settings.brackets||e,n!=t&&(n=t.split(" ")),r&&r.test?t==e?r:RegExp(r.source.replace(/\{/g,n[0].replace(/(?=.)/g,"\\")).replace(/\}/g,n[1].replace(/(?=.)/g,"\\")),r.global?"g":""):n[r]}}("{ }"),x=function(){function e(e,n){return e=(e||w(0)+w(1)).replace(w(/\\{/g),"￰").replace(w(/\\}/g),"￱"),n=r(e,i(e,w(/{/),w(/}/))),new Function("d","return "+(n[0]||n[2]||n[3]?"["+n.map(function(e,n){return n%2?t(e,!0):'"'+e.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':t(n[1])).replace(/\uFFF0/g,w(0)).replace(/\uFFF1/g,w(1))+";")}function t(e,t){return e=e.replace(/\n/g," ").replace(w(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(e)?"["+i(e,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(e){return e.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(e,t,r){return r.replace(/[^&|=!><]+/g,n)+'?"'+t+'":"",'})}).join("")+'].join(" ").trim()':n(e,t)}function n(e,t){return e=e.trim(),e?"(function(v){try{v="+(e.replace(u,function(e,t,n){return n?"(d."+n+"===undefined?"+("undefined"==typeof window?"global.":"window.")+n+":d."+n+")":e})||"x")+"}finally{return "+(t===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function r(e,t){var n=[];return t.map(function(t,r){r=e.indexOf(t),n.push(e.slice(0,r),t),e=e.slice(r+t.length)}),n.concat(e)}function i(e,t,n){var r,i=0,o=[],u=new RegExp("("+t.source+")|("+n.source+")","g");return e.replace(u,function(t,n,u,a){!i&&n&&(r=a),i+=n?1:-1,i||null==u||o.push(e.slice(r,a+u.length))}),o}var o={},u=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,n){return t&&(o[t]=o[t]||e(t))(n)}}(),C=[],O={};y.tag=function(e,t,n,r){"function"==typeof n?r=n:n&&h(n),O[e]={name:e,tmpl:t,fn:r}},y.mount=function(e,t,n){function r(e){var r=t||e.tagName.toLowerCase(),o=b(e,r,n);o&&i.push(o)}"*"==e&&(e=Object.keys(O).join(", ")),"object"==typeof t&&(n=t,t=0);var i=[];return e.tagName?(r(e),i[0]):(c(document.querySelectorAll(e),r),i)},y.update=function(){return c(C,function(e){e.update()})},y.mountTo=y.mount,y.util={brackets:w,tmpl:x},"object"==typeof exports?module.exports=y:"function"==typeof define&&define.amd?define(function(){return y}):this.riot=y}();
},{}],3:[function(require,module,exports){
var riot=require("riot");riot.tag("app",'<div id="header"> <a id="yc" href="http://www.ycombinator.com"> <img src="https://news.ycombinator.com/y18.gif"> </a> <h1><a href="#">Hacker News</a></h1> <span class="source"> Built with <a href="https://muut.com/riotjs/" target="_blank">Riot.js</a> | <a href="https://github.com/txchen/riot-hn" target="_blank">Source</a> </span> </div> <div id="hnview"></div>',function(e){var t=this;t.currentView=null,this.loadView=function(e,i){t.currentView&&t.currentView.unmount(!0),t.currentView=riot.mount("div#hnview",e,{data:i})[0]}.bind(this),this.studyRoute=function(e,i){switch(e){case"user":require("./views/user-view.html"),t.loadView("user-view",i);break;case"item":require("./views/item-view.html"),t.loadView("item-view",i);break;case"news":require("./views/news-view.html"),t.loadView("news-view",i);break;default:riot.route("news/1")}}.bind(this),riot.route(t.studyRoute),this.on("mount",function(){riot.route.exec(t.studyRoute)})});
},{"./views/item-view.html":8,"./views/news-view.html":9,"./views/user-view.html":10,"riot":2}],4:[function(require,module,exports){
var riot=require("riot");riot.tag("comment",'<li show="{ data.text }"> <div class="comhead"> <a class="toggle" onclick="{ toggle }">{ open ? \'[-]\' : \'[+]\' }</a> <a href="#user/{ data.by }">{ data.by }</a> { filters.fromNow(data.time) } ago </div> <div class="comment-content" name="commentcontent" show="{ open }"></div> <ul class="child-comments" if="{ data.kids }" show="{ open }"> <comment each="{ comments }" data="{ this }"></comment> </ul> </li>',function(t){var e=require("../store"),o=this;o.data=t.data,o.open=!0,this.on("mount",function(){e.fetchItems(o.data.kids,function(t){o.comments=t,o.update()}),o.commentcontent.innerHTML=o.data.text}),this.toggle=function(t){this.open=!this.open}.bind(this)});
},{"../store":7,"riot":2}],5:[function(require,module,exports){
var riot=require("riot");riot.tag("item",'<span class="index">{ opts.index }.</span> <p> <a class="title" href="{ href() }" target="_blank">{ itemdata.title }</a> <span class="domain" show="{ showDomain() }"> ({ filters.domain(itemdata.url) }) </span> </p> <p class="subtext"> <span show="{ showInfo() }"> { itemdata.score } points by <a href="#user/{ itemdata.by }">{ itemdata.by }</a> </span> { filters.fromNow(itemdata.time) } ago <span class="comments-link" show="{ showInfo() }"> | <a href="#item/{ itemdata.id }">comments</a> </span> </p>',function(t){var a=this;a.itemdata=t.data,this.href=function(){return a.itemdata.url||"#/item/"+a.itemdata.id}.bind(this),this.showInfo=function(){return"story"===a.itemdata.type||"poll"===a.itemdata.type}.bind(this),this.showDomain=function(){return"story"===a.itemdata.type}.bind(this)});
},{"riot":2}],6:[function(require,module,exports){
var parser=document.createElement("a");filters={fromNow:function(r){var e=Date.now()/1e3-Number(r);return 3600>e?~~(e/60)+" minutes":86400>e?~~(e/3600)+" hours":~~(e/86400)+" days"},domain:function(r){return parser.href=r,parser.hostname}};
},{}],7:[function(require,module,exports){
var api=new Firebase("https://hacker-news.firebaseio.com/v0"),storiesPerPage=30,cachedStoryIds=[],Emitter=require("events").EventEmitter,store=module.exports=new Emitter;api.child("topstories").on("value",function(e){cachedStoryIds=e.val(),store.emit("update")}),store.fetchItem=function(e,t){api.child("item/"+e).once("value",function(e){t(e.val())})},store.fetchUser=function(e,t){api.child("user/"+e).once("value",function(e){t(e.val())})},store.fetchItems=function(e,t){function r(r){o.push(r),o.length>=e.length&&t(o)}if(!e||!e.length)return t([]);var o=[];e.forEach(function(e){store.fetchItem(e,r)})},store.fetchItemsByPage=function(e,t){var r=(e-1)*storiesPerPage,o=e*storiesPerPage,s=cachedStoryIds.slice(r,o);store.fetchItems(s,t)};
},{"events":1}],8:[function(require,module,exports){
var riot=require("riot");riot.tag("item-view",'<div class="view item-view" show="{ items.length }"> <item class="item" each="{ items }" data="{ this }"></item> <ul class="poll-options" if="{ pollOptions }"> <li each="{ pollOptions }"> <p>{ text }</p> <p class="subtext">{ score } points</p> </li> </ul> <ul class="comments" if="{ comments }"> <comment each="{ comments }" data="{ this }"></comment> </ul> <p show="{ !comments.length }">No comments yet.</p> </div>',function(t){require("../components/item.html"),require("../components/comment.html");var e=require("../store"),i=this;i.items=[],this.fetchComments=function(){e.fetchItems(i.items[0].kids,function(t){i.comments=t,i.update()})}.bind(this),this.fetchPollOptions=function(){e.fetchItems(i.items[0].parts,function(t){i.pollOptions=t,i.update()})}.bind(this),i.on("mount",function(){e.fetchItem(t.data,function(t){i.items=[t],i.fetchComments(),"poll"===t.type&&i.fetchPollOptions(),i.update()})})});
},{"../components/comment.html":4,"../components/item.html":5,"../store":7,"riot":2}],9:[function(require,module,exports){
var riot=require("riot");riot.tag("news-view",'<div class="view news-view" class="{loading: !items.length}"> <ul> <li class="item" each="{ item, i in items }" track-by="id"> <item data="{ item }" index="{ (parent.page - 1) * 30 + i + 1}" ></item> </li> </ul> <div class="nav" show="{ items.length }"> <a if="{ page > 1 }" href="#news/{ page - 1 }">&lt; prev</a> <a if="{ page < 4 }" href="#news/{ page - -1 }">more...</a> </div> </div>',function(e){require("../components/item.html");var i=require("../store"),t=this;t.page=e.data,t.items=[],this.fetchNews=function(){i.fetchItemsByPage(t.page,function(e){t.items=e,t.displayPage=t.page,t.update()})}.bind(this),t.on("mount",function(){t.fetchNews(),i.on("update",t.fetchNews)}),t.on("unmount",function(){i.removeListener("update",t.fetchNews)})});
},{"../components/item.html":5,"../store":7,"riot":2}],10:[function(require,module,exports){
var riot=require("riot");riot.tag("user-view",'<div class="view user-view" show="{ user }"> <ul> <li><span class="label">user:</span> { user.id }</li> <li><span class="label">created:</span> { filters.fromNow(user.created) } ago</li> <li><span class="label">karma:</span> { user.karma }</li> <li> <span class="label">about:</span> <div class="about" name="about"></div> </li> </ul> <p class="links"> <a href="https://news.ycombinator.com/submitted?id={ user.id }">submissions</a><br> <a href="https://news.ycombinator.com/threads?id={ user.id }">comments</a> </p> </div>',function(s){var a=require("../store"),e=this;e.on("mount",function(){a.fetchUser(s.data,function(s){e.user=s,e.about.innerHTML=e.user.about,e.update()})})});
},{"../store":7,"riot":2}],11:[function(require,module,exports){
require("./filters.js"),require("./app.html"),require("riot").mount("app");
},{"./app.html":3,"./filters.js":6,"riot":2}]},{},[11])


//# sourceMappingURL=index.js.map