(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
},{}],2:[function(require,module,exports){
!function(t,e){"use strict";function n(t){var e=V(0),n=t.slice(e.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return n?{key:n[1],pos:n[2],val:e+n[3]}:{val:t}}function r(t,e,n){var r={};return r[t.key]=e,t.pos&&(r[t.pos]=n),r}function i(t,e,i){d(t,"each");var o,u=v(t),c=t.outerHTML,f=!!z[u],s=z[u]||{tmpl:c},p=t.parentNode,l=document.createComment("riot placeholder"),m=[],h=g(t);p.insertBefore(l,t),i=n(i),e.one("premount",function(){p.stub&&(p=e.root),t.parentNode.removeChild(t)}).on("update",function(){var n=q(i.val,e);B(n)||(o=n?JSON.stringify(n):"",n=n?Object.keys(n).map(function(t){return r(i,t,n[t])}):[]);for(var c=document.createDocumentFragment(),d=m.length,g=n.length;d>g;)m[--d].unmount(),m.splice(d,1);for(d=0;g>d;++d){var v=!o&&i.key?r(i,n[d],d):n[d];m[d]?m[d].update(v):((m[d]=new a(s,{parent:e,isLoop:!0,hasImpl:f,root:f?t.cloneNode():p,item:v},t.innerHTML)).mount(),c.appendChild(m[d].root)),m[d]._item=v}p.insertBefore(c,l),h&&(e.tags[u]=m)}).one("updated",function(){var t=Object.keys(e);L(p,function(n){1!=n.nodeType||n.isLoop||n._looped||(n._visited=!1,n._looped=!0,N(n,e,t))})})}function o(t,e,n){L(t,function(t){if(1==t.nodeType){t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0;var r=g(t);if(r&&!t.isLoop){for(var i,o=new a(r,{root:t,parent:e},t.innerHTML),u=v(t),c=e;!g(c.root)&&c.parent;)c=c.parent;o.parent=c,i=c.tags[u],i?(B(i)||(c.tags[u]=[i]),c.tags[u].push(o)):c.tags[u]=o,t.innerHTML="",n.push(o)}t.isLoop||N(t,e,[])}})}function u(t,e,n){function r(t,e,r){if(e.indexOf(V(0))>=0){var i={dom:t,expr:e};n.push(h(i,r))}}L(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==n){var o=t.getAttribute("each");return o?(i(t,e,o),!1):(p(t.attributes,function(e){var n=e.name,i=n.split("__")[1];return r(t,e.value,{attr:i||n,bool:i}),i?(d(t,n),!1):void 0}),g(t)?!1:void 0)}})}function a(t,n,r){function i(){var t=M&&T?g:C||g;p(S.attributes,function(e){v[e.name]=q(e.value,t)}),p(Object.keys(D),function(e){v[e]=q(D[e],t)})}function a(t){for(var e in N)typeof g[e]!==$&&(g[e]=t[e])}function c(){g.parent&&T&&p(Object.keys(g.parent),function(t){var e=~R.indexOf(t);(typeof g[t]===$||e)&&(e||R.push(t),g[t]=g.parent[t])})}function f(t){if(p(H,function(e){e[t?"mount":"unmount"]()}),C){var e=t?"on":"off";T?C[e]("unmount",g.unmount):C[e]("update",g.update)[e]("unmount",g.unmount)}}var d,g=j.observable(this),v=x(n.opts)||{},L=y(t.tmpl),C=n.parent,T=n.isLoop,M=n.hasImpl,N=b(n.item),A=[],H=[],S=n.root,O=t.fn,E=S.tagName.toLowerCase(),D={},R=[],I=/([\w\-]+)\s?=\s?['"]([^'"]+)["']/gim;if(O&&S._tag&&S._tag.unmount(!0),this.isMounted=!1,S.isLoop=T,t.attrs){var z=t.attrs.match(I);p(z,function(t){var e=t.split(/\s?=\s?/);S.setAttribute(e[0],e[1].replace(/['"]/g,""))})}S._tag=this,this._id=m(~~((new Date).getTime()*Math.random())),h(this,{parent:C,root:S,opts:v,tags:{}},N),p(S.attributes,function(t){var e=t.value;V(/\{.*\}/).test(e)&&(D[t.name]=e)}),L.innerHTML&&!/select|select|optgroup|tbody|tr/.test(E)&&(L.innerHTML=_(L.innerHTML,r)),this.update=function(t){t=b(t),c(),(typeof N===F||B(N))&&(a(t),N=t),h(g,t),i(),g.trigger("update",t),s(A,g),g.trigger("updated")},this.mixin=function(){p(arguments,function(t){t=typeof t===k?j.mixin(t):t,p(Object.keys(t),function(e){"init"!=e&&(g[e]=l(t[e])?t[e].bind(g):t[e])}),t.init&&t.init.bind(g)()})},this.mount=function(){if(i(),O&&O.call(g,v),f(!0),u(L,g,A),(!g.parent||M)&&u(g.root,g,A),(!g.parent||T)&&g.update(N),g.trigger("premount"),T&&!M)g.root=S=d=L.firstChild;else{for(;L.firstChild;)S.appendChild(L.firstChild);S.stub&&(g.root=S=C.root)}!g.parent||g.parent.isMounted?(g.isMounted=!0,g.trigger("mount")):g.parent.one("mount",function(){w(g.root)||(g.parent.isMounted=g.isMounted=!0,g.trigger("mount"))})},this.unmount=function(t){var n=d||S,r=n.parentNode;if(r){if(C)B(C.tags[E])?p(C.tags[E],function(t,e){t._id==g._id&&C.tags[E].splice(e,1)}):C.tags[E]=e;else for(;n.firstChild;)n.removeChild(n.firstChild);t||r.removeChild(n)}g.trigger("unmount"),f(),g.off("*"),S._tag=null},o(L,this,H)}function c(e,n,r,i){r[e]=function(e){var o=i._item,u=i.parent;if(!o)for(;u;)o=u._item,u=o?!1:u.parent;e=e||t.event;try{e.currentTarget=r,e.target||(e.target=e.srcElement),e.which||(e.which=e.charCode||e.keyCode)}catch(a){}if(e.item=o,n.call(i,e)===!0||/radio|check/.test(r.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),!e.preventUpdate){var c=o?i.parent:i;c.update()}}}function f(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function s(t,e){p(t,function(t,n){var r=t.dom,i=t.attr,o=q(t.expr,e),u=t.dom.parentNode;if(null==o&&(o=""),u&&"TEXTAREA"==u.tagName&&(o=o.replace(/riot-/g,"")),t.value!==o){if(t.value=o,!i)return r.nodeValue=o.toString();if(d(r,i),l(o))c(i,o,r,e);else if("if"==i){var a=t.stub;o?a&&(f(a.parentNode,a,r),r.inStub=!1,w(r)||L(r,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(a=t.stub=a||document.createTextNode(""),f(r.parentNode,r,a),r.inStub=!0)}else if(/^(show|hide)$/.test(i))"hide"==i&&(o=!o),r.style.display=o?"":"none";else if("value"==i)r.value=o;else if("riot-"==i.slice(0,5)&&"riot-tag"!=i)i=i.slice(5),o?r.setAttribute(i,o):d(r,i);else{if(t.bool){if(r[i]=o,!o)return;o=i}typeof o!==F&&r.setAttribute(i,o)}}})}function p(t,e){for(var n,r=0,i=(t||[]).length;i>r;r++)n=t[r],null!=n&&e(n,r)===!1&&r--;return t}function l(t){return"function"==typeof t||!1}function d(t,e){t.removeAttribute(e)}function m(t){return(t^t>>31)-(t>>31)}function g(t){var e=t.tagName.toLowerCase();return z[t.getAttribute(J)||e]}function v(t){var e=g(t),n=t.getAttribute("name"),r=n&&n.indexOf(V(0))<0?n:e?e.name:t.tagName.toLowerCase();return r}function h(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var i in e)t[i]=e[i];return t}function b(t){if(!(t instanceof a))return t;var e={},n=["update","root","mount","unmount","mixin","isMounted","isloop","tags","parent","opts"];for(var r in t)~n.indexOf(r)||(e[r]=t[r]);return e}function y(t){var e=D&&10>D,n=/^\s*<([\w-]+)/.exec(t),r=n?n[1].toLowerCase():"",i="th"===r||"td"===r?"tr":"tr"===r?"tbody":"div",o=C(i);return o.stub=!0,e&&("optgroup"===r?S(o,t):"option"===r?H(o,t):"div"!==i?A(o,t,r):e=0),e||(o.innerHTML=t),o}function L(t,e){if(t)if(e(t)===!1)L(t.nextSibling,e);else for(t=t.firstChild;t;)L(t,e),t=t.nextSibling}function w(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function C(t){return document.createElement(t)}function _(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gim,e||"")}function T(t,e){return(e||document).querySelectorAll(t)}function M(t,e){return(e||document).querySelector(t)}function x(t){function e(){}return e.prototype=t,new e}function N(t,e,n){p(t.attributes,function(r){if(!t._visited&&("id"===r.name||"name"===r.name)){t._visited=!0;var i,o=r.value;if(~n.indexOf(o))return;i=e[o],i?B(i)?i.push(t):e[o]=[i,t]:e[o]=t}})}function A(t,e,n){var r,i=C("div"),o=/td|th/.test(n)?3:2;for(i.innerHTML="<table>"+e+"</table>",r=i.firstChild;o--;)r=r.firstChild;t.appendChild(r)}function H(t,e){var n=C("option"),r=/value=[\"'](.+?)[\"']/,i=/selected=[\"'](.+?)[\"']/,o=/each=[\"'](.+?)[\"']/,u=/if=[\"'](.+?)[\"']/,a=/>([^<]*)</,c=e.match(r),f=e.match(i),s=e.match(a),p=e.match(o),l=e.match(u);s?n.innerHTML=s[1]:n.innerHTML=e,c&&(n.value=c[1]),f&&n.setAttribute("riot-selected",f[1]),p&&n.setAttribute("each",p[1]),l&&n.setAttribute("if",l[1]),t.appendChild(n)}function S(t,e){var n=C("optgroup"),r=/label=[\"'](.+?)[\"']/,i=/^<([^>]*)>/,o=/^<([^ \>]*)/,u=e.match(r),a=e.match(i),c=e.match(o),f=e;if(a){var s=e.slice(a[1].length+2,-c[1].length-3).trim();f=s}if(u&&n.setAttribute("riot-label",u[1]),f){var p=C("div");H(p,f),n.appendChild(p.firstChild)}t.appendChild(n)}function O(t){if(R=R||C("style"),document.head){if(R.styleSheet?R.styleSheet.cssText+=t:R.innerHTML+=t,!R._rendered)if(R.styleSheet)document.body.appendChild(R);else{var e=M("style[type=riot]");e?(e.parentNode.insertBefore(R,e),e.parentNode.removeChild(e)):document.head.appendChild(R)}R._rendered=!0}}function E(t,e,n){var r=z[e],i=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",r&&t&&(r=new a(r,{root:t,opts:n},i)),r&&r.mount?(r.mount(),I.push(r),r.on("unmount",function(){I.splice(I.indexOf(r),1)})):void 0}var j={version:"v2.2.2",settings:{}},k="string",F="object",$="undefined",B=Array.isArray||function(){var t=Object.prototype.toString;return function(e){return"[object Array]"===t.call(e)}}(),D=function(e){return 0|(t&&t.document||{}).documentMode}();j.observable=function(t){t=t||{};var e={},n=0;return t.on=function(r,i){return l(i)&&(typeof i.id===$&&(i._id=n++),r.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(i),i.typed=n>0})),t},t.off=function(n,r){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(r)for(var n,i=e[t],o=0;n=i&&i[o];++o)n._id==r._id&&i.splice(o--,1);else e[t]=[]}),t},t.one=function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},t.trigger=function(n){for(var r,i=[].slice.call(arguments,1),o=e[n]||[],u=0;r=o[u];++u)r.busy||(r.busy=1,r.apply(t,r.typed?[n].concat(i):i),o[u]!==r&&u--,r.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(i)),t},t},j.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),function(t,e,n){function r(){return a.href.split("#")[1]||""}function i(t){return t.split("/")}function o(t){t.type&&(t=r()),t!=u&&(c.trigger.apply(null,["H"].concat(i(t))),u=t)}if(n){var u,a=n.location,c=t.observable(),f=!1,s=t.route=function(t){t[0]?(a.hash=t,o(t)):c.on("H",t)};s.exec=function(t){t.apply(null,i(r()))},s.parser=function(t){i=t},s.stop=function(){f&&(n.removeEventListener?n.removeEventListener(e,o,!1):n.detachEvent("on"+e,o),c.off("*"),f=!1)},s.start=function(){f||(n.addEventListener?n.addEventListener(e,o,!1):n.attachEvent("on"+e,o),f=!0)},s.start()}}(j,"hashchange",t);var R,V=function(t){var e,n,r,i=/[{}]/g;return function(o){var u=j.settings.brackets||t;return e!==u&&(e=u,r=u.split(" "),n=r.map(function(t){return t.replace(/(?=.)/g,"\\")})),o instanceof RegExp?u===t?o:new RegExp(o.source.replace(i,function(t){return n[~~("}"===t)]}),o.global?"g":""):r[o]}}("{ }"),q=function(){function e(t,e){return t=(t||V(0)+V(1)).replace(V(/\\{/g),"￰").replace(V(/\\}/g),"￱"),e=i(t,o(t,V(/{/),V(/}/))),new Function("d","return "+(e[0]||e[2]||e[3]?"["+e.map(function(t,e){return e%2?n(t,!0):'"'+t.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1])).replace(/\uFFF0/g,V(0)).replace(/\uFFF1/g,V(1))+";")}function n(t,e){return t=t.replace(/\n/g," ").replace(V(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+o(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,r)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':r(t,e)}function r(e,n){return e=e.trim(),e?"(function(v){try{v="+(e.replace(a,function(e,n,r){return r?"(d."+r+"===undefined?"+("undefined"==typeof t?"global.":"window.")+r+":d."+r+")":e})||"x")+"}catch(e){}finally{return "+(n===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function i(t,e){var n=[];return e.map(function(e,r){r=t.indexOf(e),n.push(t.slice(0,r),e),t=t.slice(r+e.length)}),n.concat(t)}function o(t,e,n){var r,i=0,o=[],u=new RegExp("("+e.source+")|("+n.source+")","g");return t.replace(u,function(e,n,u,a){!i&&n&&(r=a),i+=n?1:-1,i||null==u||o.push(t.slice(r,a+u.length))}),o}var u={},a=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,n){return t&&(u[t]=u[t]||e(t))(n)}}(),I=[],z={},J="riot-tag";j.tag=function(t,e,n,r,i){return l(r)&&(i=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(l(n)?i=n:O(n)),z[t]={name:t,tmpl:e,attrs:r,fn:i},t},j.mount=function(t,e,n){function r(t){var e="";return p(t,function(t){e+=', *[riot-tag="'+t.trim()+'"]'}),e}function i(){var t=Object.keys(z);return t+r(t)}function o(t){if(t.tagName){e&&!t.getAttribute(J)&&t.setAttribute(J,e);var r=E(t,e||t.getAttribute(J)||t.tagName.toLowerCase(),n);r&&c.push(r)}else t.length&&p(t,o)}var u,a,c=[];if(typeof e===F&&(n=e,e=0),typeof t===k?("*"===t?t=a=i():t+=r(t.split(",")),u=T(t)):u=t,"*"===e){if(e=a||i(),u.tagName)u=T(e,u);else{var f=[];p(u,function(t){f.push(T(e,t))}),u=f}e=0}return u.tagName?o(u):p(u,o),c},j.update=function(){return p(I,function(t){t.update()})},j.mountTo=j.mount,j.util={brackets:V,tmpl:q},typeof exports===F?module.exports=j:"function"==typeof define&&define.amd?define(function(){return t.riot=j}):t.riot=j}("undefined"!=typeof window?window:void 0);
},{}],3:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag("app",'<div id="header"> <a id="yc" href="http://www.ycombinator.com"> <img src="https://news.ycombinator.com/y18.gif"> </a> <h1><a href="#">Hacker News</a></h1> <span class="source"> Built with <a href="https://muut.com/riotjs/" target="_blank">Riot.js</a> | <a href="https://github.com/txchen/riot-hn" target="_blank">Source</a> </span> </div> <div id="hnview"></div>',function(e){var t=this;t.currentView=null,this.loadView=function(e,i){t.currentView&&t.currentView.unmount(!0),t.currentView=riot.mount("div#hnview",e,{data:i})[0]}.bind(this),this.studyRoute=function(e,i){switch(e){case"user":require("./views/user-view.html"),t.loadView("user-view",i);break;case"item":require("./views/item-view.html"),t.loadView("item-view",i);break;case"news":require("./views/news-view.html"),t.loadView("news-view",i);break;default:riot.route("news/1")}}.bind(this),riot.route(t.studyRoute),this.on("mount",function(){riot.route.exec(t.studyRoute)})});
},{"./views/item-view.html":9,"./views/news-view.html":10,"./views/user-view.html":11,"riot":2}],4:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag("comment",'<li show="{ data.text }"> <div class="comhead"> <a class="toggle" onclick="{ toggle }">{ open ? \'[-]\' : \'[+]\' }</a> <a href="#user/{ data.by }">{ data.by }</a> { filters.fromNow(data.time) } ago </div> <div class="comment-content" name="commentcontent" show="{ open }"></div> <ul class="child-comments" if="{ data.kids }" show="{ open }"> <div each="{ c, i in comments }"> <comment data="{ c }"></comment> <div> </ul> </li>',function(t){var e=require("../store"),o=this;o.data=t.data,o.open=!0,o.commentcontent.innerHTML=o.data.text,e.fetchItems(o.data.kids,function(t){o.comments=t,o.update()}),this.toggle=function(t){this.open=!this.open}.bind(this)});
},{"../store":8,"riot":2}],5:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag("item",'<span class="index">{ opts.index }.</span> <p> <a class="title" href="{ href() }" target="_blank">{ itemdata.title }</a> <span class="domain" show="{ showDomain() }"> ({ filters.domain(itemdata.url) }) </span> </p> <p class="subtext"> <span show="{ showInfo() }"> { itemdata.score } points by <a href="#user/{ itemdata.by }">{ itemdata.by }</a> </span> { filters.fromNow(itemdata.time) } ago <span class="comments-link" show="{ showInfo() }"> | <a href="#item/{ itemdata.id }">comments</a> </span> </p>',function(t){var a=this;a.itemdata=t.data,this.href=function(){return a.itemdata.url||"#/item/"+a.itemdata.id}.bind(this),this.showInfo=function(){return"story"===a.itemdata.type||"poll"===a.itemdata.type}.bind(this),this.showDomain=function(){return"story"===a.itemdata.type}.bind(this)});
},{"riot":2}],6:[function(require,module,exports){
var parser=document.createElement("a");window.filters={fromNow:function(r){var e=Date.now()/1e3-Number(r);return 3600>e?~~(e/60)+" minutes":86400>e?~~(e/3600)+" hours":~~(e/86400)+" days"},domain:function(r){return parser.href=r,parser.hostname}};
},{}],7:[function(require,module,exports){
require("./filters.js"),require("./app.html"),require("riot").mount("app");
},{"./app.html":3,"./filters.js":6,"riot":2}],8:[function(require,module,exports){
var api=new Firebase("https://hacker-news.firebaseio.com/v0"),storiesPerPage=30,cachedStoryIds=[],Emitter=require("events").EventEmitter,store=new Emitter;api.child("topstories").on("value",function(e){cachedStoryIds=e.val(),store.emit("update")}),store.fetchItem=function(e,t){api.child("item/"+e).once("value",function(e){t(e.val())})},store.fetchUser=function(e,t){api.child("user/"+e).once("value",function(e){t(e.val())})},store.fetchItems=function(e,t){function r(r){o.push(r),o.length>=e.length&&t(o)}if(!e||!e.length)return t([]);var o=[];e.forEach(function(e){store.fetchItem(e,r)})},store.fetchItemsByPage=function(e,t){var r=(e-1)*storiesPerPage,o=e*storiesPerPage,s=cachedStoryIds.slice(r,o);store.fetchItems(s,t)},module.exports=store;
},{"events":1}],9:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag("item-view",'<div class="view item-view" show="{ items.length }"> <item class="item" each="{ items }" data="{ this }"></item> <ul class="poll-options" if="{ pollOptions }"> <li each="{ pollOptions }"> <p>{ text }</p> <p class="subtext">{ score } points</p> </li> </ul> <ul class="comments"> <div each="{ c, i in comments }"> <comment data="{ c }"></comment> </div> </ul> <p show="{ !comments.length }">No comments yet.</p> </div>',function(t){require("../components/item.html"),require("../components/comment.html");var e=require("../store"),i=this;i.items=[],this.fetchComments=function(){e.fetchItems(i.items[0].kids,function(t){i.comments=t,i.update()})}.bind(this),this.fetchPollOptions=function(){e.fetchItems(i.items[0].parts,function(t){i.pollOptions=t,i.update()})}.bind(this),e.fetchItem(t.data,function(t){i.items=[t],i.fetchComments(),"poll"===t.type&&i.fetchPollOptions(),i.update()})});
},{"../components/comment.html":4,"../components/item.html":5,"../store":8,"riot":2}],10:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag("news-view",'<div class="view news-view" class="{loading: !items.length}"> <ul> <li class="item" each="{ item, i in items }" track-by="id"> <item data="{ item }" index="{ (parent.page - 1) * 30 + i + 1}" ></item> </li> </ul> <div class="nav" show="{ items.length }"> <a if="{ page > 1 }" href="#news/{ page - 1 }">&lt; prev</a> <a if="{ page < 4 }" href="#news/{ page - -1 }">more...</a> </div> </div>',function(e){require("../components/item.html");var t=require("../store"),i=this;i.page=e.data,i.items=[],this.fetchNews=function(){t.fetchItemsByPage(i.page,function(e){i.items=e,i.displayPage=i.page,i.update()})}.bind(this),i.on("mount",function(){i.fetchNews(),t.on("update",i.fetchNews)}),i.on("unmount",function(){t.removeListener("update",i.fetchNews)})});
},{"../components/item.html":5,"../store":8,"riot":2}],11:[function(require,module,exports){
var riot=require("riot");module.exports=riot.tag("user-view",'<div class="view user-view" show="{ user }"> <ul> <li><span class="label">user:</span> { user.id }</li> <li><span class="label">created:</span> { filters.fromNow(user.created) } ago</li> <li><span class="label">karma:</span> { user.karma }</li> <li> <span class="label">about:</span> <div class="about" name="about"></div> </li> </ul> <p class="links"> <a href="https://news.ycombinator.com/submitted?id={ user.id }">submissions</a><br> <a href="https://news.ycombinator.com/threads?id={ user.id }">comments</a> </p> </div>',function(s){var a=require("../store"),e=this;e.on("mount",function(){a.fetchUser(s.data,function(s){e.user=s,e.about.innerHTML=e.user.about,e.update()})})});
},{"../store":8,"riot":2}]},{},[7])


//# sourceMappingURL=index.js.map