(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
},{}],2:[function(require,module,exports){
!function(){function n(n){var e={val:n},t=n.split(/\s+in\s+/);return t[1]&&(e.val="{ "+t[1],t=t[0].slice(1).trim().split(/,\s*/),e.key=t[0],e.pos=t[1]),e}function e(e,t,r){c(e,"each");var o,u=e.outerHTML,a=e.previousSibling,f=e.parentNode,l=[],s=[];r=n(r),t.one("update",function(){f.removeChild(e)}).one("mount",function(){v(f)||(f=t.root)}).on("update",function(){var n=m(r.val,t);if(n){if(!Array.isArray(n)){var e=JSON.stringify(n);if(e==o)return;o=e,s.map(function(n){n.unmount()}),s=l=[],n=Object.keys(n).map(function(e){var t={};return t[r.key]=e,t[r.pos]=n[e],t})}d(l,n).map(function(n){var e=l.indexOf(n),t=s[e];t&&(t.unmount(),l.splice(e,1),s.splice(e,1))});var c=f.childNodes,p=Array.prototype.indexOf.call(c,a);d(n,l).map(function(e){var a=n.indexOf(e);if(!o&&r.key){var l={};l[r.key]=e,l[r.pos]=a,e=l}var d=new i({tmpl:u},{before:c[p+1+a],parent:t,root:f,loop:!0,item:e});s.splice(a,0,d)}),l=n.slice()}})}function t(n,e){p(n,function(n){1==n.nodeType&&f(n.attributes,function(t){/^(name|id)$/.test(t.name)&&(e[t.value]=n)})})}function r(n,t,r){function o(n,e,t){if(m(e)||t){var i={dom:n,expr:e};r.push(l(i,t||{}))}}p(n,function(n){var r=n.nodeType;if(3==r&&"STYLE"!=n.parentNode.tagName&&o(n,n.nodeValue),1==r){var u=n.getAttribute("each");if(u)return e(n,t,u),!1;var a=b[n.tagName.toLowerCase()];return a?(a=new i(a,{root:n,parent:t}),!1):void f(n.attributes,function(e){var t=e.name,r=e.value,i=t.split("__")[1];return o(n,r,{attr:i||t,bool:i}),i?(c(n,t),!1):void 0})}})}function i(n,e){function i(){Object.keys(d).map(function(n){w[n]=m(d[n],g||u)})}function o(){for(;j.firstChild;)b?(C=j.firstChild,y.insertBefore(j.firstChild,e.before||null)):y.appendChild(j.firstChild);v(y)||(u.root=y=g.root),u.trigger("mount"),g&&g.on("update",u.update).one("unmount",u.unmount)}var u=h.observable(this),p=[],d={},g=e.parent,b=e.loop,y=e.root,w=e.opts,x=e.item;if(b||!y.riot){y.riot=1,w=w||{},l(this,{parent:g,root:y,opts:w,children:[]}),l(this,x),f(y.attributes,function(n){var e=n.name,t=n.value;return d[e]=t,t.indexOf("{")>=0?(c(y,e),!1):void 0}),i(),g&&g.children.push(this);var C,j=s(n.tmpl);t(j,this),this.update=function(n){l(u,n),l(u,x),u.trigger("update"),i(),a(p,u,x),u.trigger("updated")},this.unmount=function(){if(b)y.removeChild(C);else{var n=y.parentNode;n&&n.removeChild(y)}if(g){var e=g.children;e.splice(e.indexOf(u),1)}u.trigger("unmount"),g&&g.off("update",u.update),mounted=!1},n.fn&&n.fn.call(this,w),r(j,this,p),this.update(),o()}}function o(n,e,t,r,i){t[n]=function(n){n=n||window.event,n.which=n.which||n.charCode||n.keyCode,n.target=n.target||n.srcElement,n.currentTarget=t,n.item=i,e.call(r,n)!==!0&&(n.preventDefault&&n.preventDefault(),n.returnValue=!1),r.update()}}function u(n,e,t){n&&(n.insertBefore(t,e),n.removeChild(e))}function a(n,e,t){f(n,function(n){var r=n.dom,i=n.attr,a=m(n.expr,e);if(null==a&&(a=""),n.value!==a){if(n.value=a,!i)return r.nodeValue=a;if((!a&&n.bool||/obj|func/.test(typeof a))&&c(r,i),"function"==typeof a)o(i,a,r,e,t);else if("if"==i){c(r,i);var f=n.stub;a?f&&u(f.parentNode,f,r):(f=n.stub=f||document.createTextNode(""),u(r.parentNode,r,f))}else if(/^(show|hide)$/.test(i))c(r,i),"hide"==i&&(a=!a),r.style.display=a?"":"none";else{if(n.bool){if(r[i]=a,!a)return;a=i}r.setAttribute(i,a)}}})}function f(n,e){for(var t=0;t<(n||[]).length;t++)e(n[t],t)===!1&&t--}function c(n,e){n.removeAttribute(e)}function l(n,e){return e&&Object.keys(e).map(function(t){n[t]=e[t]}),n}function s(n){var e=n.trim().slice(1,3).toLowerCase(),t=/td|th/.test(e)?"tr":"tr"==e?"tbody":"div";return el=document.createElement(t),el.stub=!0,el.innerHTML=n,el}function p(n,e){for(n=e(n)===!1?n.nextSibling:n.firstChild;n;)p(n,e),n=n.nextSibling}function d(n,e){return n.filter(function(n){return e.indexOf(n)<0})}function v(n){var e=n.parentNode,t=window.HTMLDocument;return e&&!(t&&e instanceof t)}var h={version:"v2.0.8",settings:{}};h.observable=function(n){n=n||{};var e={};return n.on=function(t,r){return"function"==typeof r&&t.replace(/\S+/g,function(n,t){(e[n]=e[n]||[]).push(r),r.typed=t>0}),n},n.off=function(t,r){if("*"==t)e={};else if(r)for(var i,o=e[t],u=0;i=o&&o[u];++u)i==r&&(o.splice(u,1),u--);else t.replace(/\S+/g,function(n){e[n]=[]});return n},n.one=function(e,t){return t&&(t.one=1),n.on(e,t)},n.trigger=function(t){for(var r,i=[].slice.call(arguments,1),o=e[t]||[],u=0;r=o[u];++u)r.busy||(r.busy=1,r.apply(n,r.typed?[t].concat(i):i),r.one?(o.splice(u,1),u--):o[u]!==r&&u--,r.busy=0);return n},n},function(n,e){function t(){return o.hash.slice(1)}function r(n){return n.split("/")}function i(n){n.type&&(n=t()),n!=a&&(u.trigger.apply(null,["H"].concat(r(n))),a=n)}if(this.top){var o=location,u=n.observable(),a=t(),f=window,c=n.route=function(n){n[0]?(o.hash=n,i(n)):u.on("H",n)};c.exec=function(n){n.apply(null,r(t()))},c.parser=function(n){r=n},f.addEventListener?f.addEventListener(e,i,!1):f.attachEvent("on"+e,i)}}(h,"hashchange");var m=function(){function n(n,t){return t=(n||i.join("")).replace(r(/\\{/),"￰").replace(r(/\\}/),"￱").split(o),new Function("d","return "+(t[0]||t[2]||t[3]?"["+t.map(function(n,t){return t%2?e(n,1):'"'+n.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':e(t[1])).replace(/\uFFF0/g,i[0]).replace(/\uFFF1/g,i[1]))}function e(n,e){return n=n.replace(/\n/g," ").replace(r(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w-"']+ *:/.test(n)?"["+n.replace(/\W*([\w-]+)\W*:([^,]+)/g,function(n,r,i){return i.replace(/\w[^,|& ]*/g,function(n){return t(n,e)})+'?"'+r+'":"",'})+'].join(" ")':t(n,e)}function t(n,e){return"(function(v){try{v="+(n.replace(a,function(n,e,t){return t?"(d."+t+"===undefined?window."+t+":d."+t+")":n})||"x")+"}finally{return "+(e?'!v&&v!==0?"":v':"v")+"}}).call(d)"}function r(n){return RegExp(n.source.split("{").join("\\"+i[0]).split("}").join("\\"+i[1]),n.global?"g":"")}var i,o,u={},a=/("|').+?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_]\w*)/gi;return function(e,t){var a=h.settings.brackets||"{ }";return a!=i&&(i=a.split(" "),o=r(/({[\s\S]*?})/)),t?e&&(u[e]=u[e]||n(e))(t):o.test(e)}}(),g=[],b={};h.tag=function(n,e,t){b[n]={name:n,tmpl:e,fn:t}};var y=h.mountTo=function(n,e,t){var r,o=b[e];return o&&(r=new i(o,{root:n,opts:t})),r?(g.push(r),r.on("unmount",function(){g.splice(g.indexOf(r),1)})):void 0};h.mount=function(n,e){"*"==n&&(n=Object.keys(b).join(", "));var t=[];return f(document.querySelectorAll(n),function(n){var r=n.tagName.toLowerCase(),i=y(n,r,e);i&&t.push(i)}),t},h.update=function(){return g.map(function(n){n.update()}),g},"object"==typeof exports?module.exports=h:"function"==typeof define&&define.amd?define(function(){return h}):this.riot=h}();
},{}],3:[function(require,module,exports){
var riot=require("riot");riot.tag("app",'<div id="header"> <a id="yc" href="http://www.ycombinator.com"> <img src="https://news.ycombinator.com/y18.gif"> </a> <h1><a href="#">Hacker News</a></h1> <span class="source"> Built with <a href="https://muut.com/riotjs/" target="_blank">Riot.js</a> | <a href="https://github.com/txchen/riot-hn" target="_blank">Source</a> </span> </div> <div id="placeholder"></div>',function(){var e=this;this.loadView=function(t,i){var r=document.getElementById("hnview");r&&r.remove();var a=document.getElementById("placeholder");a.insertAdjacentHTML("afterend",'<div id="hnview"></div>'),e.currentview=t+i,riot.mountTo(document.getElementById("hnview"),t,i),e.update()}.bind(this),this.studyRoute=function(t,i){switch(t){case"user":require("./views/user-view.tag"),e.loadView("user-view",i);break;case"item":require("./views/item-view.tag"),e.loadView("item-view",i);break;case"news":require("./views/news-view.tag"),e.loadView("news-view",i);break;default:riot.route("news/1")}}.bind(this),riot.route(e.studyRoute),this.on("mount",function(){riot.route.exec(e.studyRoute)})});
},{"./views/item-view.tag":9,"./views/news-view.tag":10,"./views/user-view.tag":11,"riot":2}],4:[function(require,module,exports){
var riot=require("riot");riot.tag("comment",'<li show="{ data.text }"> <div class="comhead"> <a class="toggle" onclick="{ toggle }">{ open ? \'[-]\' : \'[+]\' }</a> <a href="#user/{ data.by }">{ data.by }</a> { filters.fromNow(data.time) } ago </div> <div class="comment-content" name="commentcontent" show="{ open }"></div> <ul class="child-comments" if="{ data.kids }" show="{ open }"> <comment each="{ comments }" data="{ this }"></comment> </ul> </li>',function(t){var e=require("../store"),o=this;o.data=t.data,o.open=!0,this.on("mount",function(){e.fetchItems(o.data.kids,function(t){o.comments=t,o.update()}),o.commentcontent.innerHTML=o.data.text}),this.toggle=function(){this.open=!this.open}.bind(this)});
},{"../store":8,"riot":2}],5:[function(require,module,exports){
var riot=require("riot");riot.tag("item",'<span class="index">{ opts.index }.</span> <p> <a class="title" href="{ href() }" target="_blank">{ itemdata.title }</a> <span class="domain" show="{ showDomain() }"> ({ filters.domain(itemdata.url) }) </span> </p> <p class="subtext"> <span show="{ showInfo() }"> { itemdata.score } points by <a href="#user/{ itemdata.by }">{ itemdata.by }</a> </span> { filters.fromNow(itemdata.time) } ago <span class="comments-link" show="{ showInfo() }"> | <a href="#item/{ itemdata.id }">comments</a> </span> </p>',function(t){var a=this;a.itemdata=t.data,this.href=function(){return a.itemdata.url||"#/item/"+a.itemdata.id}.bind(this),this.showInfo=function(){return"story"===a.itemdata.type||"poll"===a.itemdata.type}.bind(this),this.showDomain=function(){return"story"===a.itemdata.type}.bind(this)});
},{"riot":2}],6:[function(require,module,exports){
var parser=document.createElement("a");filters={fromNow:function(e){var r=Date.now()/1e3-Number(e);return 3600>r?~~(r/60)+" minutes":86400>r?~~(r/3600)+" hours":~~(r/86400)+" days"},domain:function(e){return parser.href=e,parser.hostname}},module.exports=filters;
},{}],7:[function(require,module,exports){
require("./filters.js"),require("./app.tag"),require("riot").mount("app");
},{"./app.tag":3,"./filters.js":6,"riot":2}],8:[function(require,module,exports){
var api=new Firebase("https://hacker-news.firebaseio.com/v0"),storiesPerPage=30,cachedStoryIds=[],Emitter=require("events").EventEmitter,store=module.exports=new Emitter;api.child("topstories").on("value",function(e){cachedStoryIds=e.val(),store.emit("update")}),store.fetchItem=function(e,t){api.child("item/"+e).once("value",function(e){t(e.val())})},store.fetchUser=function(e,t){api.child("user/"+e).once("value",function(e){t(e.val())})},store.fetchItems=function(e,t){function r(r){o.push(r),o.length>=e.length&&t(o)}if(!e||!e.length)return t([]);var o=[];e.forEach(function(e){store.fetchItem(e,r)})},store.fetchItemsByPage=function(e,t){var r=(e-1)*storiesPerPage,o=e*storiesPerPage,s=cachedStoryIds.slice(r,o);store.fetchItems(s,t)};
},{"events":1}],9:[function(require,module,exports){
var riot=require("riot");riot.tag("item-view",'<div class="view item-view" show="{ items.length }"> <item class="item" each="{ items }" data="{ this }"></item> <ul class="poll-options" if="{ pollOptions }"> <li each="{ pollOptions }"> <p>{ text }</p> <p class="subtext">{ score } points</p> </li> </ul> <ul class="comments" if="{ comments }"> <comment each="{ comments }" data="{ this }"></comment> </ul> <p show="{ !comments.length }">No comments yet.</p> </div>',function(t){require("../components/item.tag"),require("../components/comment.tag");var e=require("../store"),i=this;i.items=[],this.fetchComments=function(){e.fetchItems(i.items[0].kids,function(t){i.comments=t,i.update()})}.bind(this),this.fetchPollOptions=function(){e.fetchItems(i.items[0].parts,function(t){i.pollOptions=t,i.update()})}.bind(this),i.on("mount",function(){e.fetchItem(t,function(t){i.items=[t],i.fetchComments(),"poll"===t.type&&i.fetchPollOptions(),i.update()})})});
},{"../components/comment.tag":4,"../components/item.tag":5,"../store":8,"riot":2}],10:[function(require,module,exports){
var riot=require("riot");riot.tag("news-view",'<div class="view news-view" class="{loading: !items.length}"> <ul> <li class="item" each="{ item, i in items }" track-by="id"> <item data="{ item }" index="{ (parent.page - 1) * 30 + i + 1}" ></item> </li> </ul> <div class="nav" show="{ items.length }"> <a if="{ opts > 1 }" href="#news/{ opts - 1 }">&lt; prev</a> <a if="{ opts < 4 }" href="#news/{ opts - -1 }">more...</a> </div> </div>',function(e){require("../components/item.tag");var t=require("../store"),i=this;i.page=e,i.items=[],this.fetchNews=function(){t.fetchItemsByPage(i.page,function(e){i.items=e,i.displayPage=i.page,i.update()})}.bind(this),i.on("mount",function(){i.fetchNews(),t.on("update",i.fetchNews)}),i.on("unmount",function(){t.removeListener("update",i.fetchNews)})});
},{"../components/item.tag":5,"../store":8,"riot":2}],11:[function(require,module,exports){
var riot=require("riot");riot.tag("user-view",'<div class="view user-view" show="{ user }"> <ul> <li><span class="label">user:</span> { user.id }</li> <li><span class="label">created:</span> { filters.fromNow(user.created) } ago</li> <li><span class="label">karma:</span> { user.karma }</li> <li> <span class="label">about:</span> <div class="about" name="about"></div> </li> </ul> <p class="links"> <a href="https://news.ycombinator.com/submitted?id={ user.id }">submissions</a><br> <a href="https://news.ycombinator.com/threads?id={ user.id }">comments</a> </p> </div>',function(s){var a=require("../store"),e=this;e.on("mount",function(){a.fetchUser(s,function(s){e.user=s,e.about.innerHTML=e.user.about,e.update()})})});
},{"../store":8,"riot":2}]},{},[7])


//# sourceMappingURL=index.js.map